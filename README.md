# myT-x

**Windows民によるWindows民の私による私の為のターミナル**

## 前置き
本プログラムの利用によって生じたあらゆる損害について、制作者は一切の責任を負いません。

利用用途として使う想定の
Claude code エージェントモードや、gitworktree等については、<br>
基本的な動作について確認が取れています。

設定については、`Agent Model`,`環境変数`は作者が明示的に作成しましたが、<br>
その他はAIが勝手に追加している為、デフォルト値以外の動作は未確認です。

動作確認方法  
※ makefileを使って運用しています。
```go
// デバックモード
make dev

// 本番ビルド
make build

```


## 概要

![作業イメージ画像](sample.png)


**WindowでもネイティブにClaude Codeチーム開発を楽しみたい！**  <br>  
**いい感じのGUIが欲しい。難しいのやだ！！視覚的にわかりやすいのが欲しい**　　<br>
**あれもこれもやりたい。**　　<br>
**トークン量が足りないので何とかいい感じにしたい。**  　　<br>

という、思いから作成しました。　　<br>
このアプリケーションはmyT-x.exe一つで、上記を実現します。<br>
プログラムの整理ができ次第、ソース事公開予定。  <br>

**主な機能:**
- ターミナル画面分割・レイアウト管理
- Claude Code Agent Teams のモデル自動切り替え
- Git Worktree 連携
- **Viewer System** — File Tree / Git Graph / Diff View / Error Log の4つのビューア
- Claude Code 専用環境変数の一括管理
- WebSocket による高速ペインデータ転送

- 開発者
  - claude code,codex cli
- 査読・評価者
  - gemini cli
- メインレビュアー  
  - copilot(opus)

そもそも、私による私の為のアプリケーションである事が前提となる為　　<br>
OSS、セキュリティ診断を継続的に行い　　<br>
安心安全に利用できるように、リファクタリングをAIが随時遂行しております。　　　<br>
基本的な機能に関する破壊的変更は予定しておりませんが　　<br>
内部的には破壊的リファクタリングが発生していますので　　<br>
破壊された機能に対する修正は発見し次第となります。<br>
　　
リファクタリングや機能開発を先行している関係で、フォルダ整理が済んでいない影響で　　<br>
ソースコードの公開を後回しにしております。<br>

## 大事なこと

一つこれだけはお伝えしますが　　<br>
**ターミナル操作系のアプリケーションには最大限注意してください**　　<br>
特に、今回の仕組みを開発して思ったのが、悪意を忍び込ませることが可能すぎます。　　<br>
私が言うのもなんですが、有名なOSSや、有名なエディタ以外は　　<br>
怖さしかないです。　　<br>

なので作ったし作ってよかったと思います。　　<br>


---

## はじめかた

`myT-x.exe` をダブルクリックで起動するだけです。<br>
初回は設定ファイルが自動で作られるので、すぐ使いはじめられます。<br>

---

## Agent Teams のモデルを自動で切り替える

Claude Code の Agent Teams では、親エージェントが子エージェントを次々と起動します。<br>
myT-x はこの起動時に、子エージェントのモデルを自動で置き換えることができます。<br>

設定画面の「**Agent Model**」タブを開くと、次の2つの仕組みが用意されています。<br>

### 一括置換（すべての子エージェントに適用）

「**置換元**」と「**置換先**」にモデル名を入れると、子エージェントが起動されるたびにモデルが自動で差し替わります。<br>

```
設定画面での入力:

  置換元 (from):  claude-opus-4-6
  置換先 (to):    claude-sonnet-4-5-20250929
```

こうすると、すべての子エージェントが Opus ではなく Sonnet で動きます。<br>
コストを抑えたいときに便利です。<br>

> **💡 `ALL` ワイルドカード:** 置換元に `ALL` を指定すると、モデル名に関係なくすべての子エージェントを置換先のモデルに一括変更できます。

### エージェント名ごとの個別設定（オーバーライド）

「ここだけは高性能モデルを使いたい」というエージェントがいる場合、オーバーライドを追加します。

```
設定画面での入力:

  #1  エージェント名: security     モデル: claude-opus-4-6
  #2  エージェント名: reviewer     モデル: claude-sonnet-4-5-20250929
  #3  エージェント名: coder        モデル: claude-sonnet-4-5-20250929
```
↑ `作者コメント`
```
`opus`とか`haiku`とかでもいけるかも？
微妙に使われる命名にブレがあって、変換できていないケースがテスト中にありました。
アップデート等で、変わる恐れあるかもしれません。
```

エージェント名は部分一致で判定されます（大文字小文字は区別しません）。<br>
上から順に評価され、最初にマッチしたルールが使われます。<br>

**使い分けの例:**

| やりたいこと | 設定方法 |
|------------|---------|
| 全体的にコストを下げたい | 置換元を Opus、置換先を Sonnet に |
| セキュリティだけは慎重に | オーバーライドで `security` に Opus を指定 |
| 用途ごとに最適なモデルを | オーバーライドを複数追加して使い分け |

---

## 思考レベルを一括設定する

設定画面の「**環境変数**」タブには、思考レベルの専用セレクタがあります。

```
設定画面での入力:

  思考Level (CLAUDE_CODE_EFFORT_LEVEL):  [low / medium / high]
```

ここで選んだ値が、すべてのペインに自動で設定されます。<br>
ペインを開くたびに手で `export` する必要はありません。<br>

| 思考レベル | 特徴 |
|----------|------|
| **high** | じっくり考える。複雑なタスクや重要な判断に |
| **medium** | バランス型。通常の作業に |
| **low** | 素早く返答。単純な作業やチャットに |

### Claude Code 専用環境変数

「**環境変数**」タブには、Claude Code 専用の環境変数セクションもあります。<br>
ここで設定した変数は、Claude Code のセッション作成時に自動で適用されます。<br>
セッション作成ダイアログの「**Claude Code 環境変数を使用**」チェックボックスで、適用する／しないを切り替えられます。<br>

### その他の環境変数（ペイン環境変数）

同じ画面で、好きな環境変数を追加することもできます。<br>
「**+ 環境変数追加**」ボタンから変数名と値を入れるだけです。<br>
すべてのペインに自動で反映されます。<br>
こちらもセッション作成時に「**ペイン環境変数を使用**」チェックボックスで適用を制御できます。<br>

---

## Agent Team セッションの作り方

サイドバーの「**+ 新規セッション**」から、フォルダを選んでセッションを作ります。<br>
「**Agent Team として開始**」にチェックを入れると、そのセッションは Agent Teams 用になります。<br>

サイドバーでは通常セッションが `S`、Agent Team セッションが `A` のマークで区別されます。<br>

---

## 画面の見かた

```
+------------------------------------------------------------+---+
|  [設定]                                                     |   |
+------------+-----------------------------------------------+ A |
|            |  ┌──────────────┬──────────────┐              | c |
|  myT-x     |  │              │              │              | t |
|            |  │  ペイン 1     │  ペイン 2    │              | i |
| ────────── |  │              │              │              | v |
|            |  │  PowerShell   │  PowerShell  │              | i |
| S 作業A    |  │              │              │              | t |
| S 作業B    |  └──────────────┴──────────────┘              | y |
| A Agent    |                                               |   |
|            |                                               | S |
| [+ 新規]   |                                               | t |
+------------+-----------------------------------------------+ r |
|  作業A | ペイン: 2 | 13:42          [SYNC] [プレフィックス]   | i |
+------------------------------------------------------------+ p |
                                                              +---+
```

**左のサイドバー** 
- セッション一覧。クリックで切替、ドラッグで並び替え、ダブルクリックで名前変更。

**右のメインエリア** 
- ターミナル画面。分割して自由に並べられます。

**右端の Activity Strip** 
- ビューアの切り替えアイコンが並びます（File Tree / Git Graph / Diff View / Error Log）。
- Error Log に未読がある場合はバッジ（●）が表示されます。

**下のステータスバー** 
- 現在のセッション名や状態が表示されます。

---

## ターミナルの便利な使い方

### 画面分割

ペインのツールバーにあるアイコンで左右・上下に分割できます。<br>
ペインが増えたら、レイアウトボタン（横均等・縦均等・左メイン・上メイン・タイル）で一発整列。<br>

### すぐ呼び出し（Quake Mode）

`Ctrl+Shift+F12` でウィンドウが出たり隠れたりします。<br>
ブラウザやエディタで作業中でも、ターミナルが必要なときだけパッと呼び出せます。<br>

### クイック検索

`Ctrl+P` でセッション名・ブランチ名をあいまい検索。たくさんセッションがあっても一瞬で見つかります。

### コピー＆ペースト

テキストを選択すると自動コピー。右クリックでペースト。`Ctrl+C` / `Ctrl+V` も直感的に動きます。

### 文字サイズ変更

`Ctrl` + マウスホイールで拡大・縮小。

### ファイルドロップ

ファイルをペインにドロップするとパスが入力されます。

### テキスト検索

`Ctrl+F` でペイン内の出力をテキスト検索。長いログからエラーを探すのに便利です。

---

## Viewer System（開発者ツール）

画面右端の **Activity Strip** にあるアイコンをクリックすると、各ビューアが開きます。<br>
キーボードショートカットでも開閉できます。`Escape` キーでビューアを閉じます。<br>

### File Tree（ファイルツリー）

セッションの作業ディレクトリ内のファイル・フォルダを仮想化ツリーで表示します。<br>
ファイルを選択するとプレビューが表示されます。パスのコピーも可能です。<br>

| ショートカット | `Ctrl+Shift+E` |
|--------------|----------------|

### Git Graph（Gitグラフ）

コミット履歴をSVGグラフで視覚的に表示します。<br>
ブランチの分岐・マージの関係がひと目でわかります。コミットを選択するとdiffを表示できます。<br>

| ショートカット | `Ctrl+Shift+G` |
|--------------|----------------|

### Diff View（差分ビュー）

`git diff HEAD` の結果をファイルツリー＋行単位diffで表示します。<br>
ステージ済み・未ステージの変更に加え、新規追加ファイルも表示されます。<br>
折りたたまれた非変更行は「Expand hidden lines」で展開できます。<br>

| ショートカット | `Ctrl+Shift+D` |
|--------------|----------------|

### Error Log（エラーログ）

アプリケーションの Warn / Error レベルのログをリアルタイムで表示します。<br>
ログはJSONL形式で永続化され、セッション終了後も確認できます。<br>
未読のエラーがある場合、Activity Strip のアイコンにバッジが表示されます。<br>

| ショートカット | `Ctrl+Shift+L` |
|--------------|----------------|

---

## 設定でカスタマイズ

画面左上の「**設定**」ボタンから、6つのタブで設定を変えられます。

### 基本設定

| 変えられること | どうなるか |
|--------------|----------|
| Shell | ペインで起動するシェルが変わります（PowerShell / pwsh / cmd / bash / WSL） |
| Prefix | ショートカットの起動キーが変わります（初期値: `Ctrl+b`） |
| Quake Mode | ON にするとホットキーでウィンドウを呼び出せます |
| Global Hotkey | Quake Mode のキーを変えられます（初期値: `Ctrl+Shift+F12`） |

### キーバインド

Prefix キーのあとに押すキーを好みに変えられます。

| 操作 | 初期値 |
|------|--------|
| 左右分割 | `%` |
| 上下分割 | `"` |
| ズーム切替 | `z` |
| ペインを閉じる | `x` |
| デタッチ | `d` |

### Agent Model / 環境変数 / Claude Code 環境変数

上の「Agent Teams のモデルを自動で切り替える」「思考レベルを一括設定する」「Claude Code 専用環境変数」を参照してください。

### Worktree（Git 連携）

Git リポジトリでセッションを作ると、Worktree 機能が使えます。<br>
ブランチごとに独立した作業フォルダが自動で作られ、片付けまで面倒を見てくれます。<br>

| 変えられること | どうなるか |
|--------------|----------|
| 有効/無効 | OFF にすると Worktree 関連の操作が非表示に |
| 強制削除 | ON にすると未コミット変更があっても Worktree を削除できます |
| セットアップスクリプト | 作成後に `npm install` などを自動実行 |
| コピーファイル | `.env` など git 管理外のファイルを自動コピー |

サイドバーではリポジトリ名とブランチ名がバッジで表示され、`main → feature/xxx` のように関係がひと目でわかります。

---

## ショートカット一覧

### ターミナル操作

| キー | 動作 |
|------|------|
| `Ctrl+b` → `%` | 左右に分割 |
| `Ctrl+b` → `"` | 上下に分割 |
| `Ctrl+b` → `z` | ズーム（最大化 / 戻す） |
| `Ctrl+b` → `x` | ペインを閉じる |
| `Ctrl+b` → `d` | デタッチ |
| `Ctrl+P` | クイック検索 |
| `Ctrl+F` | テキスト検索 |
| `Ctrl+C` | 選択中ならコピー / なければ処理中断 |
| `Ctrl+V` | ペースト |
| `Ctrl+ホイール` | 文字サイズ変更 |
| `Ctrl+Shift+F12` | ウィンドウの呼び出し / 非表示 |

### Viewer System

| キー | 動作 |
|------|------|
| `Ctrl+Shift+E` | File Tree の表示 / 非表示 |
| `Ctrl+Shift+G` | Git Graph の表示 / 非表示 |
| `Ctrl+Shift+D` | Diff View の表示 / 非表示 |
| `Ctrl+Shift+L` | Error Log の表示 / 非表示 |
| `Escape` | 開いているビューアを閉じる |

---

## 困ったとき

**設定がおかしくなった** → 設定ファイルに問題があってもアプリは起動します。設定画面から直してください。

**ホットキーが効かない** → 他のアプリが同じキーを使っていないか確認してください。設定画面で別のキーに変えられます。

**ペイン分割できない** → まず `Ctrl+b` を押して、ステータスバーに「プレフィックス」と出てから次のキーを押してください。

---

## 動作環境

Windows 10 / 11 で動作します。
