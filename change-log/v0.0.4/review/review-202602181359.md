# ã‚³ãƒŸãƒƒãƒˆå‰ãƒ¬ãƒ“ãƒ¥ãƒ¼ â€” myT-x é…ä¸‹å…¨å¤‰æ›´ãƒ•ã‚¡ã‚¤ãƒ«

> **ãƒ¬ãƒ“ãƒ¥ãƒ¼æ—¥æ™‚**: 2026-02-18 13:59  
> **å¯¾è±¡ã‚³ãƒŸãƒƒãƒˆ**: HEAD (æœªã‚³ãƒŸãƒƒãƒˆå·®åˆ†)  
> **å¤‰æ›´è¦æ¨¡**: 52 ãƒ•ã‚¡ã‚¤ãƒ« / +4,625 è¡Œ / -319 è¡Œ  
> **ãƒ¬ãƒ“ãƒ¥ãƒ¼æ‰‹æ³•**: 6 ä¸¦åˆ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã«ã‚ˆã‚‹å¤šè§’çš„ãƒ¬ãƒ“ãƒ¥ãƒ¼

---

## ç›®æ¬¡

1. [ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼‰](#1-ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ã‚«ãƒ†ã‚´ãƒªåˆ¥)
2. [æŒ‡æ‘˜ã‚µãƒãƒª](#2-æŒ‡æ‘˜ã‚µãƒãƒª)
3. [Critical â€” å³æ™‚ä¿®æ­£å¿…é ˆ](#3-critical--å³æ™‚ä¿®æ­£å¿…é ˆ)
4. [Important â€” ä¿®æ­£æ¨å¥¨](#4-important--ä¿®æ­£æ¨å¥¨)
5. [Suggestion â€” æ”¹å–„ææ¡ˆ](#5-suggestion--æ”¹å–„ææ¡ˆ)
6. [Positive â€” è‰¯ã„ç‚¹](#6-positive--è‰¯ã„ç‚¹)
7. [ã‚¿ã‚¹ã‚¯ä¸€è¦§ & ä¸¦åˆ—ä½œæ¥­å¯å¦è¡¨](#7-ã‚¿ã‚¹ã‚¯ä¸€è¦§--ä¸¦åˆ—ä½œæ¥­å¯å¦è¡¨)

---

## 1. ãƒ¬ãƒ“ãƒ¥ãƒ¼å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ï¼‰

### Category 1: App Layer (Go)
| # | ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´æ¦‚è¦ |
|---|---------|---------|
| 1 | `app_events.go` / `_test.go` | ã‚¤ãƒ™ãƒ³ãƒˆåå®šæ•°åŒ–ã€æ–°ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç³»ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ  |
| 2 | `app_pane_api.go` / `_test.go` | `ApplyLayoutPreset` ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦IDè§£æ±ºè¿½åŠ  |
| 3 | `app_session_api.go` / `_test.go` | `RenameSession` ãƒªãƒ•ã‚¡ã‚¯ã‚¿ï¼ˆã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•åŒ–ï¼‰ |
| 4 | `app_snapshot_delta.go` / `_test.go` | `ActiveWindowID` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ  |
| 5 | `app_snapshot_metrics.go` / `_test.go` | ãƒ¡ãƒˆãƒªã‚¯ã‚¹collectorå·®åˆ†è¿½åŠ  |
| 6 | `app_status.go` / `_test.go` | ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹APIæ‹¡å¼µ |
| 7 | `app_window_api.go` / `_test.go` | æ–°è¦: Windowæ“ä½œAPIä¸€å¼ |
| 8 | `app_worktree_api.go` / `_test.go` | Worktree APIèª¿æ•´ |

### Category 2: tmux-shim CLI
| # | ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´æ¦‚è¦ |
|---|---------|---------|
| 1 | `cmd/tmux-shim/command_transform.go` | æ–°ã‚³ãƒãƒ³ãƒ‰å¤‰æ›ãƒ«ãƒ¼ãƒ«è¿½åŠ  |
| 2 | `cmd/tmux-shim/model_transform.go` | ãƒ¢ãƒ‡ãƒ«å¤‰æ›é–¢æ•°è¿½åŠ  |
| 3 | `cmd/tmux-shim/parse.go` | `set-environment` ãƒ‘ãƒ¼ã‚µè¿½åŠ  |
| 4 | `cmd/tmux-shim/spec.go` | 11 ã‚³ãƒãƒ³ãƒ‰specè¿½åŠ  |
| 5 | `cmd/tmux-shim/main_test.go` | çµ±åˆãƒ†ã‚¹ãƒˆæ‹¡å¼µ |

### Category 3: internal/tmux
| # | ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´æ¦‚è¦ |
|---|---------|---------|
| 1 | `internal/tmux/command_router.go` | æ–°ãƒãƒ³ãƒ‰ãƒ©ç™»éŒ² |
| 2 | `internal/tmux/command_router_handlers_pane.go` | kill-pane, resize-pane è¿½åŠ  |
| 3 | `internal/tmux/command_router_handlers_session.go` | attach-session, rename-session, set/show-environment è¿½åŠ  |
| 4 | `internal/tmux/command_router_handlers_window.go` | æ–°è¦: å…¨ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒãƒ³ãƒ‰ãƒ© (list/rename/new/kill/select) |
| 5 | `internal/tmux/format.go` | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ç³»ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ•°è¿½åŠ  |
| 6 | `internal/tmux/key_table.go` | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦æ“ä½œã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰è¿½åŠ  |
| 7 | `internal/tmux/session_manager.go` / `_test.go` | `Snapshot()` ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¯ãƒ­ãƒ¼ãƒ³åŒ– |
| 8 | `internal/tmux/session_manager_pane_io.go` | `ListPanesByWindowTarget` è¿½åŠ  |
| 9 | `internal/tmux/session_manager_targets.go` / `_test.go` | `ResolveTarget` RLockâ†’LockåŒ–ï¼ˆauto-repairå¯¾å¿œï¼‰ |
| 10 | `internal/tmux/session_manager_window.go` / `_test.go` | æ–°è¦: Window CRUDæ“ä½œ |

### Category 4: Frontend (React/TypeScript)
| # | ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´æ¦‚è¦ |
|---|---------|---------|
| 1 | `frontend/src/App.tsx` | ConfirmDialogè¿½åŠ  |
| 2 | `frontend/src/api.ts` | Windowç³»APIé–¢æ•°ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ |
| 3 | `frontend/src/components/SessionView.tsx` | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚¿ãƒ–ãƒãƒ¼UIå…¨é¢è¿½åŠ  |
| 4 | `frontend/src/components/TerminalPane.tsx` | å¾®èª¿æ•´ |
| 5 | `frontend/src/hooks/useBackendSync.ts` | ã‚¤ãƒ™ãƒ³ãƒˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ”¹å–„ |
| 6 | `frontend/src/hooks/usePrefixKeyMode.ts` | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦æ“ä½œã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰è¿½åŠ  |
| 7 | `frontend/src/store/tmuxStore.ts` | `activeWindowId` ã‚¹ãƒˆã‚¢è¿½åŠ  |
| 8 | `frontend/src/styles/layout.css` | ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚¿ãƒ–ãƒãƒ¼CSSè¿½åŠ  |
| 9 | `frontend/src/types/tmux.ts` | Windowå‹è¿½åŠ  |
| 10 | `frontend/wailsjs/...` | è‡ªå‹•ç”Ÿæˆãƒã‚¤ãƒ³ãƒ‡ã‚£ãƒ³ã‚°æ›´æ–° |

---

## 2. æŒ‡æ‘˜ã‚µãƒãƒª

| é‡è¦åº¦ | ä»¶æ•° | èª¬æ˜ |
|--------|------|------|
| ğŸ”´ Critical | 4 | å³æ™‚ä¿®æ­£å¿…é ˆï¼ˆå‹•ä½œä¸è‰¯ãƒ»ä»•æ§˜é•åï¼‰ |
| ğŸŸ  Important | 15 | ä¿®æ­£æ¨å¥¨ï¼ˆæ½œåœ¨ãƒã‚°ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ä¸€è²«æ€§ï¼‰ |
| ğŸŸ¢ Suggestion | 21 | æ”¹å–„ææ¡ˆï¼ˆå¯èª­æ€§ãƒ»ä¿å®ˆæ€§ï¼‰ |
| ğŸ”µ Positive | 30+ | å„ªã‚ŒãŸå®Ÿè£…ãƒ»è¨­è¨ˆåˆ¤æ–­ |

---

## 3. Critical â€” å³æ™‚ä¿®æ­£å¿…é ˆ

### C-1: `models.ts` â€” `?? []` ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å‰Šé™¤ã«ã‚ˆã‚‹ TypeError ãƒªã‚¹ã‚¯

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `frontend/src/types/models.ts` : 60â€“74è¡Œä»˜è¿‘ |
| **å•é¡Œ** | `WorktreeConfig` ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã® `setup_scripts` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‹ã‚‰ `?? []` ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã‚‹ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒ `null` / `undefined` ã‚’è¿”å´ã—ãŸå ´åˆã€å¾Œç¶šã® `.map()` / `.forEach()` ç­‰ã§ **TypeError: Cannot read properties of null** ãŒç™ºç”Ÿã™ã‚‹ |
| **å†ç¾æ¡ä»¶** | ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãŒç©ºã® `setup_scripts` ã‚’ `null` ã¨ã—ã¦è¿”ã™å ´åˆï¼ˆGo ã® nil slice â†’ JSON `null`ï¼‰ |
| **ä¿®æ­£æ–¹é‡** | `this.setup_scripts = source["setup_scripts"] ?? [];` ã«æˆ»ã™ã€‚Go ã® nil slice ã¯ JSON ã§ `null` ã«ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã•ã‚Œã‚‹ãŸã‚ã€ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã®é˜²å¾¡ã¯å¿…é ˆ |

### C-2: `useBackendSync.ts` â€” UTF-8 BOM æ··å…¥ï¼ˆä»•æ§˜é•åï¼‰

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `frontend/src/hooks/useBackendSync.ts` : ãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ |
| **å•é¡Œ** | ãƒ•ã‚¡ã‚¤ãƒ«å…ˆé ­ã« UTF-8 BOM (`EF BB BF`) ãŒæ··å…¥ã€‚ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä»•æ§˜ã§ã¯ **å…¨ãƒ•ã‚¡ã‚¤ãƒ« UTF-8 BOMç„¡ã—** ãŒå¿…é ˆ |
| **ç¢ºèªæ–¹æ³•** | PowerShell ã§å…ˆé ­3ãƒã‚¤ãƒˆã‚’16é€²ãƒ€ãƒ³ãƒ— â†’ `EF BB BF` ã‚’ç¢ºèªæ¸ˆã¿ |
| **å½±éŸ¿** | Vite / esbuild ã§ã®ãƒ‘ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã®å¯èƒ½æ€§ã€‚ä»–ç’°å¢ƒã§ã®ãƒ“ãƒ«ãƒ‰å¤±æ•—ãƒªã‚¹ã‚¯ |
| **ä¿®æ­£æ–¹é‡** | BOM ã‚’é™¤å»ã—ã¦ä¿å­˜ã—ç›´ã™ |

### C-3: `SessionView.tsx` â€” `commitWindowRename` stale closure ãƒªã‚¹ã‚¯

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `frontend/src/components/SessionView.tsx` |
| **å•é¡Œ** | `commitWindowRename` ãŒ `useCallback` ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒã€ä¾å­˜é…åˆ—ã® `renamingWindowId` ãŒ **Enter ã‚­ãƒ¼æŠ¼ä¸‹ â†’ blur ã‚¤ãƒ™ãƒ³ãƒˆ** ã®é€£ç¶šç™ºç«ã§ stale ã«ãªã‚Šã€åŒä¸€ãƒªãƒãƒ¼ãƒ å‡¦ç†ãŒäºŒé‡å®Ÿè¡Œã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ |
| **å†ç¾æ¡ä»¶** | ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ä¸­ã« Enter ã‚­ãƒ¼ã‚’æŠ¼ã™ â†’ onBlur ã‚‚ç™ºç« â†’ `renamingWindowId` ãŒ stale ã®ã¾ã¾2å› `RenameWindow` API ã‚’å‘¼ã¶ |
| **ä¿®æ­£æ–¹é‡** | `commitWindowRename` å†…éƒ¨ã§æ—©æœŸã« `setRenamingWindowId(null)` ã‚’å‘¼ã³ã€`renamingWindowId === null` ã®å ´åˆã«ã‚¬ãƒ¼ãƒ‰ return ã™ã‚‹ã€‚ã¾ãŸã¯ `useRef` ã§ã‚¤ãƒ³ãƒ•ãƒ©ã‚¤ãƒˆãƒ•ãƒ©ã‚°ã‚’ç®¡ç†ã™ã‚‹ |

### C-4: `SessionView.tsx` â€” `registerRenameInput` æ¯ãƒ¬ãƒ³ãƒ€ãƒ¼å†ã‚¢ã‚¿ãƒƒãƒ

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `frontend/src/components/SessionView.tsx` |
| **å•é¡Œ** | `registerRenameInput` ãŒ `useCallback` å†…ã§é–¢æ•°ã‚’è¿”ã™é–¢æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒã€`renamingWindowId` ãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«å…¨ã‚¿ãƒ–ã® ref ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ãŒå†ã‚¢ã‚¿ãƒƒãƒã•ã‚Œã‚‹ã€‚ã‚¿ãƒ–æ•°ãŒå¤šã„å ´åˆã«ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å½±éŸ¿ |
| **ä¿®æ­£æ–¹é‡** | ref callback ã‚’å®‰å®šåŒ–ã•ã›ã‚‹ã€‚å€‹ã€…ã®ã‚¿ãƒ–ç”¨ã« `RenameInput` ã‚µãƒ–ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ‡ã‚Šå‡ºã—ã€`autoFocus` prop ã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒã‚·ãƒ³ãƒ—ãƒ« |

---

## 4. Important â€” ä¿®æ­£æ¨å¥¨

### I-1: `app_pane_api.go` â€” `ApplyLayoutPreset` ã® activeWindowID ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä¸å‚™

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `app_pane_api.go` : 195â€“219è¡Œä»˜è¿‘ |
| **å•é¡Œ** | `windowID < 0` ã§ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã¦ã„ã‚‹ãŒã€**æ­£ã®å€¤ã§ã‚‚å‰Šé™¤æ¸ˆã¿ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚’æŒ‡ã™ã‚±ãƒ¼ã‚¹**ãŒæœªå‡¦ç†ã€‚`resolveActiveWindowSnapshot` ã¯åˆ¥ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯æˆ¦ç•¥ï¼ˆæœ€è¿‘å‚ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã«ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ï¼‰ã‚’æŒã£ã¦ãŠã‚Šã€æˆ¦ç•¥ãŒä¸ä¸€è‡´ |
| **ä¿®æ­£æ–¹é‡** | `resolveActiveWindowSnapshot` ã¨åŒç­‰ã®ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ãƒ­ã‚¸ãƒƒã‚¯ã‚’é©ç”¨ã™ã‚‹ã‹ã€å…±é€šãƒ˜ãƒ«ãƒ‘ãƒ¼ã«çµ±åˆã™ã‚‹ |

### I-2: `app_pane_api.go` â€” `ApplyLayoutPreset` TOCTOU

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `app_pane_api.go` : 195â€“219è¡Œä»˜è¿‘ |
| **å•é¡Œ** | `GetSession()` ã¯ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆï¼ˆã‚¯ãƒ­ãƒ¼ãƒ³ï¼‰ã‚’è¿”ã™ãŒã€ãã“ã‹ã‚‰å–å¾—ã—ãŸ `windowID` ã‚’ç”¨ã„ã¦å¾Œç¶šã® `ApplyLayoutPresetByWindowID` ã‚’å‘¼ã¶ã¾ã§ã®é–“ã«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒå‰Šé™¤ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ï¼ˆTOCTOUï¼‰ |
| **å½±éŸ¿** | ä½é »åº¦ã ãŒã€ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦æ“ä½œãŒé«˜é€Ÿé€£æ‰“ã•ã‚ŒãŸå ´åˆã«ãƒ‘ãƒ‹ãƒƒã‚¯ã¾ãŸã¯äºˆæœŸã—ãªã„æŒ™å‹• |
| **ä¿®æ­£æ–¹é‡** | `ApplyLayoutPresetByWindowID` å†…éƒ¨ã§ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å­˜åœ¨ãƒã‚§ãƒƒã‚¯ã‚’è¡Œã„ã€ä¸åœ¨æ™‚ã¯ã‚¨ãƒ©ãƒ¼è¿”å´ |

### I-3: `command_router_handlers_window.go` â€” `handleNewWindow` ã«ãŠã‘ã‚‹ args defensive copy æœªå®Ÿæ–½

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `internal/tmux/command_router_handlers_window.go` |
| **å•é¡Œ** | `handleNewWindow` ã§ `req.Args` ã«ç›´æ¥ `append` ã—ã¦ã„ã‚‹ãŒã€`splitWindowResolved` ã§ã¯ defensive copyï¼ˆ`append([]string{}, req.Args...)`ï¼‰ã‚’è¡Œã£ã¦ã„ã‚‹ã€‚`append` ã¯å…ƒã® backing array ã‚’æ±šæŸ“ã™ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ |
| **ä¿®æ­£æ–¹é‡** | `splitWindowResolved` ã¨åŒæ§˜ã« defensive copy ã‚’è¡Œã†: `args := append([]string{}, req.Args...)` |

### I-4: `session_manager_targets.go` â€” `ResolveTarget` RLockâ†’Lock å¤‰æ›´ã«ã‚ˆã‚‹ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ‡¸å¿µ

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `internal/tmux/session_manager_targets.go` |
| **å•é¡Œ** | auto-repair å¯¾å¿œã¨ã—ã¦ `RLock` ã‚’ `Lock`ï¼ˆæ’ä»–ãƒ­ãƒƒã‚¯ï¼‰ã«å¤‰æ›´ã€‚`send-keys` ç­‰ã® **é«˜é »åº¦ã‚³ãƒãƒ³ãƒ‰ãŒå…¨ã¦æ’ä»–ãƒ­ãƒƒã‚¯å–å¾—** ã¨ãªã‚Šã€ä¸¦è¡Œæ€§ãŒãƒœãƒˆãƒ«ãƒãƒƒã‚¯åŒ–ã™ã‚‹å¯èƒ½æ€§ |
| **ä¿®æ­£æ–¹é‡** | (a) ã¾ãš RLock ã§ãƒã‚§ãƒƒã‚¯ â†’ ä¿®å¾©ä¸è¦ãªã‚‰ãã®ã¾ã¾è¿”å´ã€ä¿®å¾©å¿…è¦ãªã‚‰ Lock ã«æ˜‡æ ¼ï¼ˆdouble-check locking ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ã€ã¾ãŸã¯ (b) auto-repair ã‚’åˆ¥ã‚´ãƒ«ãƒ¼ãƒãƒ³ã«å§”è­²ã—ã¦ ResolveTarget ã¯å¸¸ã« RLock ã®ã¾ã¾ç¶­æŒ |

### I-5: `session_manager_pane_io.go` â€” `ListPanesByWindowTarget` å†…éƒ¨ãƒã‚¤ãƒ³ã‚¿ãƒªãƒ¼ã‚¯

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `internal/tmux/session_manager_pane_io.go` |
| **å•é¡Œ** | `[]*TmuxPane` ã‚¹ãƒ©ã‚¤ã‚¹ã®ãƒã‚¤ãƒ³ã‚¿ã‚’ Lock è§£æ”¾å¾Œã«è¿”å´ã€‚å‘¼ã³å‡ºã—å…ƒãŒ Lock å¤–ã§ãƒã‚¤ãƒ³ã‚¿çµŒç”±ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã‚’èª­ã¿æ›¸ãã™ã‚‹ã¨ **data race** |
| **å¯¾æ¯”** | `Snapshot()` ã§ã¯ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’å®Ÿæ–½æ¸ˆã¿ã€‚ä¸€è²«æ€§ãŒæ¬ å¦‚ |
| **ä¿®æ­£æ–¹é‡** | å€¤ã‚³ãƒ”ãƒ¼ `[]TmuxPane` ã‚’è¿”ã™ã‹ã€`[]*TmuxPane` ã®ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¯ãƒ­ãƒ¼ãƒ³ã‚’è¿”ã™ |

### I-6: `parse.go` â€” `set-environment` ç©ºæ–‡å­—åˆ— VALUE éå¯¾å¿œ

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `cmd/tmux-shim/parse.go` |
| **å•é¡Œ** | `set-environment NAME VALUE` ã§ VALUE ãŒç©ºæ–‡å­—åˆ— (`""`) ã®å ´åˆã«æ­£ã—ãè¨­å®šã§ããªã„ã€‚å®Ÿ tmux ã§ã¯ `set-environment FOO ""` ãŒæœ‰åŠ¹ |
| **å½±éŸ¿** | ä¸­ç¨‹åº¦ã€‚ç©ºæ–‡å­—åˆ—ç’°å¢ƒå¤‰æ•°ã®è¨­å®šãŒå¿…è¦ãªãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãŒé™å®šçš„ |
| **ä¿®æ­£æ–¹é‡** | ãƒ‘ãƒ¼ã‚µã«ãŠã„ã¦ã‚¯ã‚©ãƒ¼ãƒˆæ–‡å­—åˆ—ã®ãƒ‘ãƒ¼ã‚¹å¯¾å¿œã‚’è¿½åŠ  |

### I-7: tmux-shim â€” `new-window` ã® shell / model transform ãƒ†ã‚¹ãƒˆæ¬ è½

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `cmd/tmux-shim/main_test.go` |
| **å•é¡Œ** | `new-window` ã‚³ãƒãƒ³ãƒ‰ã® shell transform (ã‚·ã‚§ãƒ«ãƒ‘ã‚¹å¤‰æ›) ãŠã‚ˆã³ model transform ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ãŒå­˜åœ¨ã—ãªã„ã€‚ä»–ã®ã‚³ãƒãƒ³ãƒ‰ï¼ˆ`split-window`, `send-keys` ç­‰ï¼‰ã«ã¯ãƒ†ã‚¹ãƒˆã‚ã‚Š |
| **ä¿®æ­£æ–¹é‡** | `new-window -n mywin` ç­‰ã®ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã‚’è¿½åŠ  |

### I-8: tmux-shim â€” `resize-pane` ã® `-t` çœç•¥å¯ã«é–¢ã™ã‚‹ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä¸å‚™

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `cmd/tmux-shim/spec.go` |
| **å•é¡Œ** | `resize-pane` ã¯ `-t` ãŒä¸è¦ã ãŒã‚³ãƒ¡ãƒ³ãƒˆãŒç„¡ã„ã€‚ä»–ã®ã‚³ãƒãƒ³ãƒ‰ spec ã§ã¯ `-t` ã®è¦å¦ãŒã‚³ãƒ¡ãƒ³ãƒˆã•ã‚Œã¦ã„ã‚‹ |
| **ä¿®æ­£æ–¹é‡** | `resize-pane` ã® spec ã«ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ ï¼ˆã€Œ-t ã¯çœç•¥å¯ã€ã‚«ãƒ¬ãƒ³ãƒˆãƒšã‚¤ãƒ³ãŒå¯¾è±¡ã€ç­‰ï¼‰ |

### I-9: `usePrefixKeyMode.ts` â€” `resolveActiveWindow` äºŒé‡å‘¼ã³å‡ºã—

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `frontend/src/hooks/usePrefixKeyMode.ts` |
| **å•é¡Œ** | åŒä¸€ãƒãƒ³ãƒ‰ãƒ©å†…ã§ `resolveActiveWindow` ãŒ2å›å‘¼ã°ã‚Œã¦ã„ã‚‹ã€‚å†—é•·ãªé–¢æ•°å‘¼ã³å‡ºã— |
| **ä¿®æ­£æ–¹é‡** | å¤‰æ•°ã«çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦å†åˆ©ç”¨ |

### I-10: `TerminalPane.tsx` â€” ã‚¤ãƒ™ãƒ³ãƒˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ä¸çµ±ä¸€

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `frontend/src/components/TerminalPane.tsx` |
| **å•é¡Œ** | pane ã‚¤ãƒ™ãƒ³ãƒˆã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãŒæ—§ `EventsOff` ãƒ‘ã‚¿ãƒ¼ãƒ³ã®ã¾ã¾ã€‚`useBackendSync.ts` ã§ã¯æ–°ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ`EventsOn` ã®æˆ»ã‚Šå€¤ cleanup functionï¼‰ã«ç§»è¡Œæ¸ˆã¿ |
| **å½±éŸ¿** | å‹•ä½œä¸Šã¯å•é¡Œãªã„ãŒã€ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹å†…ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ä¸çµ±ä¸€ãŒä¿å®ˆæ€§ã«å½±éŸ¿ |
| **ä¿®æ­£æ–¹é‡** | `useBackendSync.ts` ã¨åŒã˜ cleanup function ãƒ‘ã‚¿ãƒ¼ãƒ³ã«çµ±ä¸€ |

### I-11: `SessionView.tsx` â€” hooks å®£è¨€é †åºã®éæ¨™æº–

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `frontend/src/components/SessionView.tsx` |
| **å•é¡Œ** | `useState` â†’ `useCallback` â†’ `useState` ã®ã‚ˆã†ã« hooks å®£è¨€ãŒæ··åœ¨ã€‚React ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ã§ã¯ `useState` ã‚’ã¾ã¨ã‚ã¦å…ˆé ­ã«ç½®ã |
| **ä¿®æ­£æ–¹é‡** | hooks ã‚’ç¨®é¡ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ï¼ˆuseStateç¾¤ â†’ useRefç¾¤ â†’ useCallbackç¾¤ â†’ useEffectç¾¤ï¼‰ |

### I-12: `ConfirmDialog` â€” ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£ï¼ˆãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ—æœªå®Ÿè£…ï¼‰

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `frontend/src/App.tsx` (ConfirmDialog éƒ¨åˆ†) |
| **å•é¡Œ** | ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºæ™‚ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹•ãªã—ã€‚ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãƒˆãƒ©ãƒƒãƒ— (`focus-trap`) ãªã—ã€‚Tab ã‚­ãƒ¼ã§ãƒ€ã‚¤ã‚¢ãƒ­ã‚°å¤–ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ãŒç§»å‹•å¯èƒ½ |
| **å½±éŸ¿** | Windows ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã®ãŸã‚å½±éŸ¿ã¯é™å®šçš„ã ãŒã€ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ã«å½±éŸ¿ |
| **ä¿®æ­£æ–¹é‡** | ãƒ€ã‚¤ã‚¢ãƒ­ã‚°è¡¨ç¤ºæ™‚ã«è‡ªå‹•ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ (`autoFocus`) ã‚’ Cancel/Confirm ãƒœã‚¿ãƒ³ã«è¨­å®šã€‚å¿…è¦ã«å¿œã˜ã¦ `focus-trap` ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå°å…¥ |

### I-13: `activeWindowInSessionLocked` vs `activeWindowInSession` â€” å‘½åã®ãƒ‡ãƒ¥ã‚¢ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³èª¤ç”¨ãƒªã‚¹ã‚¯

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `internal/tmux/session_manager_window.go` / `internal/tmux/format.go` |
| **å•é¡Œ** | `activeWindowInSessionLocked` (ãƒ­ãƒƒã‚¯æ‰€æœ‰å‰æ) ã¨ `activeWindowInSession` (ãƒ­ãƒƒã‚¯ä¸è¦ç‰ˆ) ãŒå…±å­˜ã€‚`format.go` ã§ã¯ç”Ÿãƒã‚¤ãƒ³ã‚¿çµŒç”±ã§ session ãŒæ¸¡ã•ã‚Œã‚‹ãŸã‚ã€ãƒ­ãƒƒã‚¯æˆ¦ç•¥ãŒä¸æ˜ç­ãªå‘¼ã³å‡ºã—ãŒå¯èƒ½ |
| **ä¿®æ­£æ–¹é‡** | (a) å‘½åè¦ç´„ã‚’æ˜ç¢ºåŒ–ï¼ˆ`Locked` ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹ã®ä»˜ä¸ãƒ«ãƒ¼ãƒ«ã‚’ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆåŒ–ï¼‰ã€ã¾ãŸã¯ (b) ãƒ­ãƒƒã‚¯ä¸è¦ç‰ˆã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ãªã„ |

### I-14: `resolveWindowFromRequest` vs `resolveWindowIDFromRequest` â€” æˆ»ã‚Šå€¤åã®æ··åŒãƒªã‚¹ã‚¯

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `internal/tmux/command_router_handlers_window.go` |
| **å•é¡Œ** | `resolveWindowFromRequest` ã¯ `*TmuxWindow` ã‚’è¿”ã—ã€`resolveWindowIDFromRequest` ã¯ `int` ã‚’è¿”ã™ã€‚å‘½åã¯åˆ†ã‹ã‚Šã‚„ã™ã„ãŒã€åˆ©ç”¨ç®‡æ‰€ã§2ã¤ã®é–¢æ•°ãŒæ··åœ¨ã™ã‚‹ã¨å¤‰æ•°åã®å‰²ã‚Šå½“ã¦ãƒŸã‚¹ãŒèµ·ãã‚„ã™ã„ |
| **ä¿®æ­£æ–¹é‡** | ä½ãƒªã‚¹ã‚¯ã ãŒæ³¨æ„å–šèµ·ã¨ã—ã¦è¨˜éŒ²ã€‚ã‚³ãƒ¡ãƒ³ãƒˆã§æˆ»ã‚Šå€¤ã®é•ã„ã‚’æ˜è¨˜ã™ã‚‹ |

### I-15: `format.go` â€” `window_index` ãŒ stable ID ã‚’è¿”ã™ tmux äº’æ›æ€§ã®ãšã‚Œ

| é …ç›® | å†…å®¹ |
|------|------|
| **ãƒ•ã‚¡ã‚¤ãƒ«** | `internal/tmux/format.go` |
| **å•é¡Œ** | `#{window_index}` ãŒå®Ÿéš›ã«ã¯ stable window ID ã‚’è¿”ã—ã¦ã„ã‚‹ã€‚å®Ÿ tmux ã§ã¯ `window_index` ã¯ 0-based ã®é€£ç•ªã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã€‚Claude Code ç­‰ã®å¤–éƒ¨ãƒ„ãƒ¼ãƒ«ãŒ tmux äº’æ›ã® `window_index` ã‚’æœŸå¾…ã™ã‚‹å ´åˆã«ä¸æ•´åˆ |
| **ä¿®æ­£æ–¹é‡** | (a) æ„å›³çš„ãªè¨­è¨ˆã§ã‚ã‚Œã°ã€ã‚³ãƒ¡ãƒ³ãƒˆã§äº’æ›æ€§ã®ãšã‚Œã‚’æ˜è¨˜ã€(b) äº’æ›æ€§ãŒå¿…è¦ãªã‚‰ 0-based ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚’è¿”ã™ã‚ˆã†ã«å¤‰æ›´ |

---

## 5. Suggestion â€” æ”¹å–„ææ¡ˆ

### S-1: ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆä¸€å…ƒç®¡ç†ï¼ˆtrigger / bypass æ§‹é€ ä½“åŒ–ï¼‰
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `app_events.go`
- **ææ¡ˆ**: ã‚¤ãƒ™ãƒ³ãƒˆåã‚’ `struct { Name string; Triggers []string; Bypass bool }` ç­‰ã§å®šç¾©ã—ã€trigger/bypass åˆ¤å®šã‚’æ§‹é€ ä½“ãƒ¡ã‚½ãƒƒãƒ‰ã«é›†ç´„

### S-2: `cloneSessionSnapshots` â†’ `SessionSnapshot.Clone()` ãƒ¡ã‚½ãƒƒãƒ‰åŒ–
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/session_manager.go`
- **ææ¡ˆ**: ã‚¯ãƒ­ãƒ¼ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‚’ `SessionSnapshot` ã®å€¤ãƒ¬ã‚·ãƒ¼ãƒãƒ¡ã‚½ãƒƒãƒ‰ã¨ã—ã¦åˆ‡ã‚Šå‡ºã—ã€‚ãƒ†ã‚¹ãƒˆå®¹æ˜“æ€§ãƒ»å†åˆ©ç”¨æ€§å‘ä¸Š

### S-3: `cloneSessionSnapshots` ç‹¬ç«‹æ€§ãƒ†ã‚¹ãƒˆè¿½åŠ 
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/session_manager_test.go`
- **ææ¡ˆ**: ã‚¯ãƒ­ãƒ¼ãƒ³å…ƒã‚’å¤‰æ›´ã—ã¦ã‚‚è¿”å´å€¤ã«å½±éŸ¿ã—ãªã„ã“ã¨ã‚’æ¤œè¨¼ã™ã‚‹ãƒ†ã‚¹ãƒˆè¿½åŠ 

### S-4: `fallbackWindowIDNearIndex` å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆè¿½åŠ 
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/session_manager_window_test.go`
- **ææ¡ˆ**: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦0å€‹ãƒ»1å€‹ãƒ»å‰Šé™¤æ¸ˆã¿IDæŒ‡å®šç­‰ã®å¢ƒç•Œå€¤ãƒ†ã‚¹ãƒˆ

### S-5: `new-window` transform ãƒ‘ã‚¹ãƒ†ã‚¹ãƒˆè¿½åŠ 
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `cmd/tmux-shim/main_test.go`
- **ææ¡ˆ**: I-7 ã¨é€£å‹•ã€‚shell / model transform ã® E2E ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹è¿½åŠ 

### S-6: `validateRequired` ã® `-t` æ¤œè¨¼ãƒ‘ã‚¿ãƒ¼ãƒ³é‡è¤‡ â†’ ãƒ˜ãƒ«ãƒ‘ãƒ¼æŠ½å‡º
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `cmd/tmux-shim/spec.go`
- **ææ¡ˆ**: è¤‡æ•°ã® spec ã§ `-t` å¿…é ˆãƒã‚§ãƒƒã‚¯ãŒåŒã˜å½¢ã§è¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã€‚å…±é€š validator é–¢æ•°ã«æŠ½å‡º

### S-7: CSS `.window-tab-close` ã« `:focus-within` è¿½åŠ 
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/styles/layout.css`
- **ææ¡ˆ**: ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã—ãŸéš›ã«ã‚‚ close ãƒœã‚¿ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†ã«

### S-8: `role="tablist"` ã® ARIA ãƒ‘ã‚¿ãƒ¼ãƒ³å®Œå…¨å®Ÿè£… or å‰Šé™¤
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/components/SessionView.tsx`
- **ææ¡ˆ**: ç¾åœ¨ `role="tablist"` ãŒä»˜ä¸ã•ã‚Œã¦ã„ã‚‹ãŒã€`role="tab"` / `aria-selected` / `aria-controls` ãŒä¸è¶³ã€‚ä¸­é€”åŠç«¯ãª ARIA ã¯é€†åŠ¹æœã€‚å®Œå…¨å®Ÿè£…ã™ã‚‹ã‹å‰Šé™¤ã™ã‚‹ã‹åˆ¤æ–­ã™ã‚‹

### S-9: `activeWindowInSessionLocked` è‡ªå‹•ä¿®å¾©æ™‚ã®ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°è¿½åŠ 
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/session_manager_window.go`
- **ææ¡ˆ**: auto-repair ç™ºå‹•æ™‚ã«ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã‚’å‡ºåŠ›ã€‚æœ¬ç•ªãƒ‡ãƒãƒƒã‚°å®¹æ˜“åŒ–

### S-10: `confirmRemoveWindow` ã‚’ `useCallback` ã§åŒ…ã‚€
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/components/SessionView.tsx`
- **ææ¡ˆ**: ç¾åœ¨ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã§å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŒã€å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰å‘¼ã°ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹å ´åˆã« `useCallback` åŒ–

### S-11: `windowLabel` ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤–ãƒ˜ãƒ«ãƒ‘ãƒ¼ã«æŠ½å‡º
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/components/SessionView.tsx`
- **ææ¡ˆ**: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦è¡¨ç¤ºåã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆãƒ­ã‚¸ãƒƒã‚¯ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå¤–ã«å‡ºã™ã€‚ãƒ†ã‚¹ãƒˆå¯èƒ½ã«ã™ã‚‹

### S-12: `handleKillPane` ã® `target` ãƒ‘ãƒ¼ã‚¹ â†’ `ResolveTarget` ã«çµ±ä¸€
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/command_router_handlers_pane.go`
- **ææ¡ˆ**: ä»–ã®ãƒãƒ³ãƒ‰ãƒ©ã¯ `ResolveTarget` ã‚’ä½¿ã£ã¦ã„ã‚‹ãŒã€`handleKillPane` ã¯ç‹¬è‡ªãƒ‘ãƒ¼ã‚¹ãŒæ··åœ¨

### S-13: `handleAttachSession` ã® `-t` å‡¦ç†ã‚’ã‚³ãƒ¡ãƒ³ãƒˆä»˜ä¸
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/command_router_handlers_session.go`
- **ææ¡ˆ**: `attach-session -t` ãŒæœ¬å®Ÿè£…ã§ã¯ no-op çš„ãªæ‰±ã„ã§ã‚ã‚‹ã“ã¨ã‚’ã‚³ãƒ¡ãƒ³ãƒˆã§æ˜è¨˜

### S-14: `key_table.go` ã® `C-n` / `C-p` ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ãŒ tmux éäº’æ›
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/key_table.go`
- **ææ¡ˆ**: å®Ÿ tmux ã® prefix + n/p ã¯ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦åˆ‡ã‚Šæ›¿ãˆã€‚`C-n` / `C-p` ã¯éæ¨™æº–ã€‚æ„å›³çš„ã§ã‚ã‚Œã°ã‚³ãƒ¡ãƒ³ãƒˆè¿½è¨˜

### S-15: `snapshot_delta.go` ã® diff ãƒ­ã‚¸ãƒƒã‚¯ã«ãŠã‘ã‚‹ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ ã¸ã®å …ç‰¢æ€§
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `app_snapshot_delta.go`
- **ææ¡ˆ**: æ–°ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰è¿½åŠ æ™‚ã« diff ãŒæ¼ã‚Œã‚‹ãƒªã‚¹ã‚¯ã€‚`TestSnapshotFieldCounts` ã®æ´»ç”¨ã‚’å¾¹åº•

### S-16: `tmuxStore.ts` â€” `setActiveWindowId` ã« validation è¿½åŠ 
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/store/tmuxStore.ts`
- **ææ¡ˆ**: ä¸æ­£ãª windowId ãŒè¨­å®šã•ã‚Œãªã„ã‚ˆã†ã€setter ã§æœ€ä½é™ã®æ¤œè¨¼ã‚’è¡Œã†

### S-17: `api.ts` â€” ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ãƒ‘ã‚¿ãƒ¼ãƒ³çµ±ä¸€
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `frontend/src/api.ts`
- **ææ¡ˆ**: ä¸€éƒ¨ã® API é–¢æ•°ã§ `try-catch` ãŒä½¿ã‚ã‚Œã€ä»–ã§ã¯ç´ é€šã—ã€‚ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’çµ±ä¸€ã™ã‚‹

### S-18: `model_transform.go` â€” transform é–¢æ•°ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆåˆ†é›¢
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `cmd/tmux-shim/model_transform.go`
- **ææ¡ˆ**: `main_test.go` ã«çµ±åˆãƒ†ã‚¹ãƒˆãŒã‚ã‚‹ãŒã€transform é–¢æ•°å€‹åˆ¥ã®ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’ `model_transform_test.go` ã«åˆ†é›¢

### S-19: `command_router.go` â€” `init()` ã® panic ã‚’ãƒ†ã‚¹ãƒˆ
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/command_router.go`
- **ææ¡ˆ**: `init()` ã§é‡è¤‡ãƒãƒ³ãƒ‰ãƒ©ç™»éŒ²æ™‚ã« panic ã™ã‚‹è¨­è¨ˆã¯è‰¯ã„ã€‚ã“ã‚Œã‚’æ¤œè¨¼ã™ã‚‹ `TestInit` ãƒ†ã‚¹ãƒˆè¿½åŠ 

### S-20: `format.go` â€” ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¤‰æ•°ã®ç¶²ç¾…ãƒ†ã‚¹ãƒˆ
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/format.go`
- **ææ¡ˆ**: æ–°è¦è¿½åŠ ã•ã‚ŒãŸ `#{window_*}` å¤‰æ•°ç¾¤ã«å¯¾ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«é§†å‹•ãƒ†ã‚¹ãƒˆè¿½åŠ 

### S-21: `session_manager_window.go` â€” `RemoveWindow` å¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆç™ºç«ãƒ†ã‚¹ãƒˆ
- **ãƒ•ã‚¡ã‚¤ãƒ«**: `internal/tmux/session_manager_window_test.go`
- **ææ¡ˆ**: ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦å‰Šé™¤æ™‚ã« `ActiveWindowID` ãŒè‡ªå‹•é·ç§»ã—ã€é©åˆ‡ãªã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç«ã•ã‚Œã‚‹ã“ã¨ã‚’æ¤œè¨¼

---

## 6. Positive â€” è‰¯ã„ç‚¹

ä»¥ä¸‹ã¯ç‰¹ã«å„ªã‚ŒãŸå®Ÿè£…ãƒ»è¨­è¨ˆåˆ¤æ–­ã¨ã—ã¦è©•ä¾¡ã§ãã‚‹ãƒã‚¤ãƒ³ãƒˆã§ã™ã€‚

| # | é ˜åŸŸ | å†…å®¹ |
|---|------|------|
| P-1 | è¨­è¨ˆ | ãƒã‚¸ãƒƒã‚¯ãƒŠãƒ³ãƒãƒ¼å®šæ•°åŒ– + æ ¹æ‹ ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆãƒãƒƒãƒ•ã‚¡ã‚µã‚¤ã‚ºç­‰ï¼‰ |
| P-2 | App | `RenameSession` ã®ã‚¤ãƒ™ãƒ³ãƒˆé§†å‹•å‹ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° â€” è²¬å‹™åˆ†é›¢ãŒæ˜ç¢º |
| P-3 | tmux | `Snapshot()` å…¨ãƒ‘ã‚¹ãƒ‡ã‚£ãƒ¼ãƒ—ã‚¯ãƒ­ãƒ¼ãƒ³åŒ– â€” data race æ ¹æœ¬å¯¾ç­– |
| P-4 | tmux | `commandSpec` ã® `init()` æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ â€” ç™»éŒ²ãƒŸã‚¹å³åº§æ¤œå‡º |
| P-5 | FE | `useBackendSync` ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—æ”¹å–„ â€” cleanup é–¢æ•°ãƒ‘ã‚¿ãƒ¼ãƒ³ |
| P-6 | FE | `fontSizeRef` ãƒ‘ã‚¿ãƒ¼ãƒ³ â€” stale closure å¯¾ç­–ã®ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ |
| P-7 | FE | `ConfirmDialog` ç§»è¡Œ â€” `window.confirm` å»ƒæ­¢ï¼ˆWails ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã§é©åˆ‡ï¼‰ |
| P-8 | Test | `TestSnapshotFieldCounts` â€” struct ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ‰ãƒªãƒ•ãƒˆè‡ªå‹•æ¤œå‡º |
| P-9 | è¨­è¨ˆ | Stable Window ID è¨­è¨ˆ â€” ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãƒ™ãƒ¼ã‚¹ã® TOCTOU å›é¿ |
| P-10 | tmux | ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨­è¨ˆã®ä¸€è²«æ€§ï¼ˆæ“ä½œå¤±æ•—æ™‚ã«å‰ã®çŠ¶æ…‹ã«æˆ»ã™ï¼‰ |
| P-11 | shim | ã‚³ãƒãƒ³ãƒ‰ spec ã®æ¤œè¨¼ (`init()` ã§ panic) â€” è¨­å®šãƒŸã‚¹æ—©æœŸç™ºè¦‹ |
| P-12 | shim | `--` (ãƒ€ãƒ–ãƒ«ãƒ€ãƒƒã‚·ãƒ¥) é©åˆ‡å‡¦ç† â€” ãƒ•ãƒ©ã‚°vsãƒã‚¸ã‚·ãƒ§ãƒŠãƒ«å¼•æ•°ã®å¢ƒç•Œ |
| P-13 | App | `app_window_api.go` ã®é©åˆ‡ãªè²¬å‹™åˆ†é›¢ã¨ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ |
| P-14 | FE | Zustand ã‚¹ãƒˆã‚¢ã® slice ãƒ‘ã‚¿ãƒ¼ãƒ³ â€” é–¢å¿ƒã®åˆ†é›¢ |
| P-15 | tmux | `fallbackWindowIDNearIndex` â€” æœ€è¿‘å‚ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¸ã®è‡ªç„¶ãªãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| P-16 | tmux | `generation` ãƒ™ãƒ¼ã‚¹ã®ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ¥ â€” ä¸è¦ãªã‚¯ãƒ­ãƒ¼ãƒ³å›é¿ |
| P-17 | Test | ãƒ†ãƒ¼ãƒ–ãƒ«é§†å‹•ãƒ†ã‚¹ãƒˆã®ä¸€è²«ã—ãŸä½¿ç”¨ |
| P-18 | FE | ãƒ€ãƒ–ãƒ«ã‚¯ãƒªãƒƒã‚¯ rename â€” ãƒ‡ã‚¹ã‚¯ãƒˆãƒƒãƒ—ã‚¢ãƒ—ãƒªã‚‰ã—ã„ UX |
| P-19 | è¨­è¨ˆ | Named Pipe IPC ã®é©åˆ‡ãªæŠ½è±¡åŒ– |
| P-20 | shim | ã‚¨ãƒ©ãƒ¼æ™‚ã¯åŸæ–‡è»¢é€ï¼ˆshim ã®ä»•æ§˜ã«å¿ å®Ÿï¼‰ |

---

## 7. ã‚¿ã‚¹ã‚¯ä¸€è¦§ & ä¸¦åˆ—ä½œæ¥­å¯å¦è¡¨

### å‡¡ä¾‹

| è¨˜å· | æ„å‘³ |
|------|------|
| âœ… | ä»–ã‚¿ã‚¹ã‚¯ã¨ **ä¸¦åˆ—ä½œæ¥­å¯èƒ½** |
| âš ï¸ | **æ¡ä»¶ä»˜ãä¸¦åˆ—** â€” åŒä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§¦ã‚‹ã‚¿ã‚¹ã‚¯ã¨ã®åŒæ™‚ä½œæ¥­ã«æ³¨æ„ |
| ğŸš« | **é †æ¬¡å®Ÿè¡Œæ¨å¥¨** â€” ä»–ã‚¿ã‚¹ã‚¯ã¨ã®ä¾å­˜é–¢ä¿‚ã‚ã‚Š |

### ã‚¿ã‚¹ã‚¯ä¸€è¦§

| # | ID | é‡è¦åº¦ | å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ« | ã‚¿ã‚¹ã‚¯æ¦‚è¦ | ä¸¦åˆ— | ä¾å­˜ãƒ»æ³¨æ„äº‹é … |
|---|-----|--------|-------------|-----------|------|---------------|
| 1 | C-1 | ğŸ”´ | `frontend/src/types/models.ts` | `?? []` ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯å¾©å…ƒ | âœ… | å˜ç‹¬ãƒ•ã‚¡ã‚¤ãƒ«ã€‚å³ä¿®æ­£å¯èƒ½ |
| 2 | C-2 | ğŸ”´ | `frontend/src/hooks/useBackendSync.ts` | BOM é™¤å» | âœ… | å˜ç‹¬ãƒ•ã‚¡ã‚¤ãƒ«ã€‚ã‚¨ãƒ‡ã‚£ã‚¿ã§é–‹ã„ã¦ BOMç„¡ã— UTF-8 ã§å†ä¿å­˜ |
| 3 | C-3 | ğŸ”´ | `frontend/src/components/SessionView.tsx` | `commitWindowRename` stale closure ä¿®æ­£ | âš ï¸ | C-4, I-11, S-8, S-10, S-11 ã¨åŒä¸€ãƒ•ã‚¡ã‚¤ãƒ« |
| 4 | C-4 | ğŸ”´ | `frontend/src/components/SessionView.tsx` | `registerRenameInput` å®‰å®šåŒ– | âš ï¸ | C-3 ã¨ä¸€ç·’ã«ä¿®æ­£ã™ã‚‹äº‹ã‚’æ¨å¥¨ |
| 5 | I-1 | ğŸŸ  | `app_pane_api.go` | `ApplyLayoutPreset` ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ä¿®æ­£ | âš ï¸ | I-2 ã¨åŒä¸€é–¢æ•° |
| 6 | I-2 | ğŸŸ  | `app_pane_api.go` | `ApplyLayoutPreset` TOCTOU å¯¾ç­– | âš ï¸ | I-1 ã¨ä¸€ç·’ã«ä¿®æ­£ã™ã‚‹äº‹ã‚’æ¨å¥¨ |
| 7 | I-3 | ğŸŸ  | `internal/tmux/command_router_handlers_window.go` | `handleNewWindow` args defensive copy | âœ… | å˜ç‹¬ä¿®æ­£å¯èƒ½ |
| 8 | I-4 | ğŸŸ  | `internal/tmux/session_manager_targets.go` | `ResolveTarget` ãƒ­ãƒƒã‚¯æˆ¦ç•¥å†è¨­è¨ˆ | âœ… | å½±éŸ¿ç¯„å›²ã¯åºƒã„ãŒãƒ•ã‚¡ã‚¤ãƒ«å˜ç‹¬ã§å®Œçµ |
| 9 | I-5 | ğŸŸ  | `internal/tmux/session_manager_pane_io.go` | `ListPanesByWindowTarget` ãƒã‚¤ãƒ³ã‚¿ãƒªãƒ¼ã‚¯ä¿®æ­£ | âœ… | å˜ç‹¬ä¿®æ­£å¯èƒ½ |
| 10 | I-6 | ğŸŸ  | `cmd/tmux-shim/parse.go` | `set-environment` ç©ºæ–‡å­—åˆ—å¯¾å¿œ | âœ… | å˜ç‹¬ä¿®æ­£å¯èƒ½ |
| 11 | I-7 | ğŸŸ  | `cmd/tmux-shim/main_test.go` | `new-window` ãƒ†ã‚¹ãƒˆè¿½åŠ  | âœ… | ãƒ†ã‚¹ãƒˆè¿½åŠ ã®ã¿ |
| 12 | I-8 | ğŸŸ  | `cmd/tmux-shim/spec.go` | `resize-pane` ã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ  | âœ… | ã‚³ãƒ¡ãƒ³ãƒˆã®ã¿ |
| 13 | I-9 | ğŸŸ  | `frontend/src/hooks/usePrefixKeyMode.ts` | `resolveActiveWindow` äºŒé‡å‘¼ã³å‡ºã—é™¤å» | âœ… | å˜ç‹¬ä¿®æ­£å¯èƒ½ |
| 14 | I-10 | ğŸŸ  | `frontend/src/components/TerminalPane.tsx` | ã‚¤ãƒ™ãƒ³ãƒˆã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ãƒ‘ã‚¿ãƒ¼ãƒ³çµ±ä¸€ | âœ… | å˜ç‹¬ä¿®æ­£å¯èƒ½ |
| 15 | I-11 | ğŸŸ  | `frontend/src/components/SessionView.tsx` | hooks å®£è¨€é †åºæ•´ç† | âš ï¸ | C-3, C-4 ã¨åŒä¸€ãƒ•ã‚¡ã‚¤ãƒ« |
| 16 | I-12 | ğŸŸ  | `frontend/src/App.tsx` | ConfirmDialog ãƒ•ã‚©ãƒ¼ã‚«ã‚¹å¯¾å¿œ | âœ… | å˜ç‹¬ä¿®æ­£å¯èƒ½ |
| 17 | I-13 | ğŸŸ  | `internal/tmux/session_manager_window.go` + `format.go` | `Locked` ã‚µãƒ•ã‚£ãƒƒã‚¯ã‚¹å‘½åè¦ç´„æ•´ç† | âš ï¸ | I-15 ã¨ `format.go` ãŒé‡è¤‡ |
| 18 | I-14 | ğŸŸ  | `internal/tmux/command_router_handlers_window.go` | æˆ»ã‚Šå€¤åã‚³ãƒ¡ãƒ³ãƒˆè¿½åŠ  | âœ… | ã‚³ãƒ¡ãƒ³ãƒˆã®ã¿ã€‚I-3 ã¨åŒä¸€ãƒ•ã‚¡ã‚¤ãƒ«ã ãŒç®‡æ‰€ãŒé›¢ã‚Œã¦ã„ã‚‹ |
| 19 | I-15 | ğŸŸ  | `internal/tmux/format.go` | `window_index` äº’æ›æ€§ã‚³ãƒ¡ãƒ³ãƒˆ or ä¿®æ­£ | âš ï¸ | I-13 ã¨é–¢é€£ |

### æ¨å¥¨ä½œæ¥­ã‚°ãƒ«ãƒ¼ãƒ—ï¼ˆåŒä¸€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ»é–¢é€£ã‚¿ã‚¹ã‚¯ã‚’ã¾ã¨ã‚ã¦å®Ÿæ–½ï¼‰

| ã‚°ãƒ«ãƒ¼ãƒ— | ã‚¿ã‚¹ã‚¯ | æ‹…å½“é ˜åŸŸ | ä¸¦åˆ—å¯å¦ |
|---------|--------|---------|---------|
| **A** | C-1 | Frontend/types | âœ… ç‹¬ç«‹ |
| **B** | C-2 | Frontend/hooks | âœ… ç‹¬ç«‹ |
| **C** | C-3 + C-4 + I-11 + S-8 + S-10 + S-11 | Frontend/SessionView.tsx | âœ… ã‚°ãƒ«ãƒ¼ãƒ—å†…é †æ¬¡ã€ä»–ã‚°ãƒ«ãƒ¼ãƒ—ã¨ä¸¦åˆ— |
| **D** | I-1 + I-2 | Backend/app_pane_api.go | âœ… ã‚°ãƒ«ãƒ¼ãƒ—å†…é †æ¬¡ã€ä»–ã‚°ãƒ«ãƒ¼ãƒ—ã¨ä¸¦åˆ— |
| **E** | I-3 + I-14 | Backend/handlers_window.go | âœ… ç‹¬ç«‹ |
| **F** | I-4 | Backend/targets.go | âœ… ç‹¬ç«‹ |
| **G** | I-5 | Backend/pane_io.go | âœ… ç‹¬ç«‹ |
| **H** | I-6 + I-8 + I-7 | tmux-shim (parse + spec + test) | âœ… ç‹¬ç«‹ |
| **I** | I-9 | Frontend/usePrefixKeyMode.ts | âœ… ç‹¬ç«‹ |
| **J** | I-10 | Frontend/TerminalPane.tsx | âœ… ç‹¬ç«‹ |
| **K** | I-12 | Frontend/App.tsx | âœ… ç‹¬ç«‹ |
| **L** | I-13 + I-15 | Backend/format.go + window.go | âœ… ç‹¬ç«‹ |

### ä¸¦åˆ—ä½œæ¥­ãƒãƒˆãƒªã‚¯ã‚¹

> **èª­ã¿æ–¹**: â—‹ = ä¸¦åˆ—OKã€â–³ = æ³¨æ„ï¼ˆåŒä¸€ãƒ•ã‚¡ã‚¤ãƒ«æ¥è§¦ã®å¯èƒ½æ€§ï¼‰ã€Ã— = é †æ¬¡æ¨å¥¨

| | A | B | C | D | E | F | G | H | I | J | K | L |
|---|---|---|---|---|---|---|---|---|---|---|---|---|
| **A** | - | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| **B** | â—‹ | - | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| **C** | â—‹ | â—‹ | - | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| **D** | â—‹ | â—‹ | â—‹ | - | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| **E** | â—‹ | â—‹ | â—‹ | â—‹ | - | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| **F** | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | - | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| **G** | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | - | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ |
| **H** | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | - | â—‹ | â—‹ | â—‹ | â—‹ |
| **I** | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | - | â—‹ | â—‹ | â—‹ |
| **J** | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | - | â—‹ | â—‹ |
| **K** | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | - | â—‹ |
| **L** | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | â—‹ | - |

> **çµè«–**: å…¨12ã‚°ãƒ«ãƒ¼ãƒ—ãŒç›¸äº’ã«ä¸¦åˆ—ä½œæ¥­å¯èƒ½ã€‚ã‚°ãƒ«ãƒ¼ãƒ—å†…ã§ã®ã‚¿ã‚¹ã‚¯é †åºã ã‘å®ˆã‚Œã°ã€æœ€å¤§12äººãŒåŒæ™‚ã«ä½œæ¥­ã§ãã‚‹æ§‹æˆã€‚

### æ¨å¥¨å„ªå…ˆé †ä½

1. **æœ€å„ªå…ˆ (Critical)**: ã‚°ãƒ«ãƒ¼ãƒ— A, B, C â€” ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰å´ã®å³æ™‚ä¿®æ­£ã€‚ç‰¹ã« **C-1 (TypeError é˜²æ­¢)** ã¨ **C-2 (BOMé™¤å»)** ã¯1åˆ†ã§ä¿®æ­£å¯èƒ½
2. **é«˜å„ªå…ˆ (Important)**: ã‚°ãƒ«ãƒ¼ãƒ— D, E, F, G â€” backend ã®ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ãƒ»ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹
3. **ä¸­å„ªå…ˆ (Important)**: ã‚°ãƒ«ãƒ¼ãƒ— H, I, J, K, L â€” shim / ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ•´å‚™ãƒ»å‘½å
4. **ä½å„ªå…ˆ (Suggestion)**: S-1 ï½ S-21 â€” å“è³ªå‘ä¸Šãƒ»æŠ€è¡“çš„è² å‚µå‰Šæ¸›

---

*End of Review*
