# 統合レビューレポート — 2026-02-21 13:43

> **統合元**: `review-20260221132915.md`, `review-20260221133422.md`, `review-20260221133534.md`
> 重複する指摘を統合し、一意のIDで管理しています。

---

## レビュー概要

今回の変更は大きく以下の3つの機能変更と付随するリファクタリングで構成される：

1. **1-Window モデルへの移行**: `new-window` コマンドのセマンティクスを「既存セッション内でウィンドウ追加」→「子セッション（child session）作成」に変更。マルチウィンドウ関連 API（`AddWindow`, `RemoveWindow`, `RenameWindow`, `useWindowRename`）を削除
2. **Session Error Log 機能追加**: バックエンド（Go）にセッションログ (`app_session_log.go`, `internal/sessionlog/handler.go`) を実装し、フロントエンド（React）に Error Log ビュー (`ErrorLogView.tsx`, `errorLogStore.ts`) を追加
3. **Go 1.26 モダン化**: `ptrBool(b) → new(b)` への `go fix` 適用、`max()` ビルトイン使用

### レビュー対象ファイル（カテゴリ別）

| カテゴリ | ファイル群 |
|----------|-----------|
| **A: Session Log（Go backend + internal）** | `app_session_log.go`, `app_session_log_types.go`, `app_session_log_test.go`, `internal/sessionlog/handler.go`, `internal/sessionlog/handler_test.go` |
| **B: App Core** | `app.go`, `app_lifecycle.go`, `app_events.go`, `app_devpanel_api.go`, `app_window_api.go`(空), `app_events_test.go`, `app_lifecycle_test.go`, `app_pane_api_test.go`, `app_session_api_test.go`, `app_window_api_test.go`(空) |
| **C: Tmux Internal** | `internal/tmux/command_router.go`, `command_router_handlers_session.go`, `command_router_handlers_window.go`, `session_manager_windows.go` + 各テスト |
| **D: Tmux Shim** | `cmd/tmux-shim/parse.go`, `cmd/tmux-shim/spec.go`, `cmd/tmux-shim/main_test.go` |
| **E: Frontend** | `api.ts`, `SessionView.tsx`, `ActivityStrip.tsx`, `ViewerSystem.tsx`, `ErrorLogView.tsx`, `errorLogStore.ts`, `useErrorLog.ts`, `useBackendSync.ts`, `usePrefixKeyMode.ts`, `useWindowRename.ts`(削除), `layout.css`, `viewer.css`, Wails生成(`App.d.ts`, `App.js`, `models.ts`) |

---

## Critical Issues（0件）

重大な問題は検出されませんでした。

---

## Important Issues（14件）

### IMP-01 【ウィンドウAPI削除によるフロントエンドデッドリンク】
- **カテゴリ**: B / E
- **ファイル**: `app_window_api.go`(削除済), フロントエンド各所
- **内容**: 「1セッション = 1ウィンドウ」の仕様変更に基づき `app_window_api.go` とテストが削除されている。Go側のWailsバインディングからメソッドが消えたことで、Frontendの既存コード呼び出し(`RenameWindow`, `AddWindow` など)がデッドリンクになりパニックや沈黙の失敗(Silent Failure)を引き起こす危険性がある。
- **対策**: フロントエンドの全APIコール箇所で完全に削除または移行が済んでいるか整合性チェック。

### IMP-02 【UI状態の不整合：初期フェッチとイベント購読の競合】
- **カテゴリ**: E
- **ファイル**: `useBackendSync.ts`, `errorLogStore.ts`, `useErrorLog.ts`
- **内容**: `useBackendSync` が `addEntry` でイベントを蓄積する一方、ErrorLogビュー初回表示時に `setEntries` で初期データを上書きする。初期フェッチ中にイベント到着 → `setEntries` で前回追加分が消失するレースが存在する。また、マウント前に発生した致命的エラーの表示漏れリスクもある。
- **対策**: 初期化マウント直後に `GetSessionErrorLog()` APIを呼び出しBackend側の状態と同期、後続イベントをListenするガードレール処理を実装。初期フェッチを`useBackendSync`に一本化するか、`setEntries`をマージロジック（重複排除付き）に変更。

### IMP-03 【`setEntries`が`unreadCount`をリセットしない】
- **カテゴリ**: E
- **ファイル**: `errorLogStore.ts`
- **内容**: `setEntries`は`unreadCount`を更新しない。初期ロード後に`addEntry`で加算された`unreadCount`がそのまま残り、ActivityStripのバッジ表示が不正確になる。
- **対策**: `setEntries`時に`unreadCount: 0`を同時にセットするか、エントリ数から再計算する。

### IMP-04 【Error Log エントリに上限がない（メモリリーク）】
- **カテゴリ**: E
- **ファイル**: `errorLogStore.ts`
- **内容**: `addEntry`で`entries: [...state.entries, entry]`としているため、エントリ数増加によりO(n)メモリコピーが毎回発生。長時間稼働セッションで`entries`配列が際限なく増大する。
- **対策**: フロントエンド側にも最大エントリ数制限を追加（例: `const MAX_ENTRIES = 10000; entries: [...state.entries, entry].slice(-MAX_ENTRIES)`）。

### IMP-05 【イベント発行のパフォーマンス懸念】
- **カテゴリ**: A
- **ファイル**: `app_session_log.go`
- **内容**: `writeSessionLogEntry`は毎回`a.emitRuntimeEvent("app:error-logged", entry)`を呼び出す。高頻度のwarn/errorが発生した場合、Wails IPC経由のイベント発行がボトルネックになる可能性がある。
- **対策**: debounceまたはバッチ送信の検討。スロットリング機構の導入。

### IMP-06 【fsync漏れ（直近エラー欠損リスク）】
- **カテゴリ**: A
- **ファイル**: `app_session_log.go`
- **内容**: `writeSessionLogEntry`にてファイルに対して`Write`を行っているが、明示的なフラッシュ(`f.Sync()`)が未実装。パニックやクラッシュ発生時、直近の重要なエラーログがOSバッファ上に残りディスクへ書き込まれないリスク。
- **対策**: エラーレベルに応じたSync()呼び出しや、定期的なバッファフラッシュの実装を推奨。

### IMP-07 【コメント文字化け（UTF-8規約違反）】
- **カテゴリ**: D / A
- **ファイル**: `spec.go`, `app_session_log.go`
- **内容**: `spec.go`の`new-window`コメントが文字化けしている（`繧ｻ繝槭Φ繝・ぅ繧ｯ繧ｹ`等）。`app_session_log.go`でも`竊・`のような文字化け。CLAUDE.mdの「全て UTF8 で BOM 無し」規約に違反。
- **対策**: 正しいUTF-8日本語コメントに修正。

### IMP-08 【空ファイルの残存】
- **カテゴリ**: B
- **ファイル**: `app_window_api.go`, `app_window_api_test.go`
- **内容**: 両ファイルとも`package main`のみ。関数がすべて`SessionManager`に移行済みで呼び出し元0件。開発フェーズで後方互換不要のため削除すべき。

### IMP-09 【`ApplyLayoutPreset`の正常系テスト欠落】
- **カテゴリ**: B
- **ファイル**: `app_pane_api_test.go`
- **内容**: `TestApplyLayoutPresetTargetsActiveWindow`が丸ごと削除されたが、`ApplyLayoutPreset`関数自体は健在。1-windowモデルでの正常系成功パステストが欠落。
- **対策**: 1ウィンドウモデル向けの`ApplyLayoutPreset`正常系テストを追加。

### IMP-10 【テスト名文字列マッチ依存（アンチパターン）】
- **カテゴリ**: C
- **ファイル**: `command_router_handlers_window_test.go`
- **内容**: `if tt.name == "inherits IsAgentTeam from parent"`のようにテスト名の文字列マッチで検証分岐。テスト名リネームでサイレントスキップされるリスク。
- **対策**: テスト構造体に`wantAgentTeam bool`等のフィールドを追加し、テスト名に依存しない形に改善。

### IMP-11 【未使用テストヘルパー関数（デッドコード）】
- **カテゴリ**: A
- **ファイル**: `app_session_log_test.go`
- **内容**: `ensureSequentialFiles`, `copyFile`, `readJSONLFile`の3関数が定義されているがテストコードから未呼出。linter警告リスク。
- **対策**: 不要なら削除するか、使用するテストを追加。

### IMP-12 【`//go:fix inline`ディレクティブの重複】
- **カテゴリ**: B
- **ファイル**: `app_session_api_test.go`
- **内容**: `ptrBool`関数に`//go:fix inline`が2行連続で記載。1行で十分。

### IMP-13 【`import`文の順序違反】
- **カテゴリ**: B
- **ファイル**: `app.go`
- **内容**: `"os"`が標準ライブラリブロックの後に単独ブロックとして配置。Go慣例（goimports）では標準ライブラリは1ブロックにまとめるべき。
- **対策**: `"os"`を`"sync/atomic"`と`"time"`の間に移動。`goimports`で自動修正可。

### IMP-14 【`validateRequired`の`-t`バリデーション重複】
- **カテゴリ**: D
- **ファイル**: `parse.go`
- **内容**: `new-window`ケースの`validateTargetFlag`呼び出しが直前のケース群と完全に重複。統合して`-n`の追加チェックだけ分離すべき。
- **対策**:
```go
case "has-session", "kill-session", "attach-session", "select-window", "kill-window", "new-window":
    if err := validateTargetFlag(command, req.Flags); err != nil {
        return err
    }
    if command == "new-window" {
        if strings.TrimSpace(asString(req.Flags["-n"])) == "" {
            return fmt.Errorf("%s requires -n", command)
        }
    }
```

---

## Suggestions（19件）

### SUG-01 【`GetSessionLogFilePath`のスレッドセーフティ / `initSessionLog`のロック不足】
- **ファイル**: `app_session_log.go`
- **内容**: `GetSessionLogFilePath()`は`sessionLogPath`を直接読むが`sessionLogMu`で保護されていない。`initSessionLog()`もstartup()の単一ゴルーチン内でのみ呼ばれるためロック不要だが、防御的にはmutexで保護が望ましい。

### SUG-02 【ロングラン稼働時のログローテーション考慮】
- **ファイル**: `app_session_log.go`
- **内容**: アプリが長時間稼働し続けた際にディレクトリ内のファイル肥大化（最大数・容量）に適切にアプローチできているか確認推奨。

### SUG-03 【残存ウィンドウイベントのクリーンアップ漏れ】
- **ファイル**: `app_events.go`, `command_router_handlers_window.go`
- **内容**: `tmux:window-destroyed`などのトリガーを拡張に備えて残すとあるが、ハンドラやSnapshotにウィンドウ依存ステートが中途半端に残っていないか確認。

### SUG-04 【`viewer-strip-badge`のCSS `position: absolute`親要素確認】
- **ファイル**: `viewer.css`
- **内容**: `.viewer-strip-badge`に`position: absolute`が指定。親の`.viewer-strip-btn`に`position: relative`が設定されていることの確認が必要。

### SUG-05 【`tmux:session-created`のイベントポリシー確認】
- **ファイル**: `app_events.go`
- **内容**: `snapshotEventPolicies`から`tmux:window-created`が削除。`tmux:session-created`が既にポリシーに含まれていることをソースで確認推奨。

### SUG-06 【フラグ継承ヘルパー関数の作成】
- **ファイル**: `command_router_handlers_window.go`
- **内容**: `IsAgentTeam`, `UseClaudeEnv`, `UsePaneEnv`の3フラグを親セッションから個別にコピー。将来フラグ追加時にコピー漏れリスク。
- **対策**: `copySessionFlags(parentSession, newSessionName)`のようなヘルパー作成を推奨。

### SUG-07 【`RenameWindowByID`のユニットテスト不足】
- **ファイル**: `session_manager_windows.go`
- **内容**: `RenameWindowByID`が存在するが、`SessionManager`レベルの直接ユニットテストが見当たらない。

### SUG-08 【`readJSONLFile`ヘルパーの最終行破棄バグ】
- **ファイル**: `app_session_log_test.go`
- **内容**: `bytes.Buffer.ReadString('\n')`で`io.EOF`時に最終行データを破棄する可能性。未使用関数のため実害なし。IMP-11で削除する場合は対応不要。

### SUG-09 【`app.go`のコメント不正確】
- **ファイル**: `app.go`
- **内容**: `// Session error log state.`だが実装はWarnレベルも含む。`// Session log state (captures Warn/Error level records).`が適切。

### SUG-10 【`handleNewWindow`のGodocステップ数不一致】
- **ファイル**: `command_router_handlers_window.go`
- **内容**: Godocは9ステップだが、実コード内は13ステップ。コメント腐敗リスク。

### SUG-11 【`[DEBUG-WS]`プレフィックスが`slog.Warn`レベルで使用】
- **ファイル**: `app.go`
- **内容**: `slog.Warn("[DEBUG-WS] wsHub is nil ...")` — DebugレベルとDEBUGプレフィックスの命名不一致。

### SUG-12 【ファイル書き込み失敗時もイベントが発行される】
- **ファイル**: `app_session_log.go`
- **内容**: `writeErr != nil`でもファイルに永続化されていないエントリが`emitRuntimeEvent`で発行される。エントリに`persisted: false`フラグ追加か、書き込み失敗自体を別イベントで通知することを検討。

### SUG-13 【`TeeHandler`がslog属性をコールバックに伝播しない】
- **ファイル**: `internal/sessionlog/handler.go`
- **内容**: コールバックは`message`と`group`のみ受け取り、`"error"`等のキー・バリュー属性が欠落。DevPanel上での情報不足の可能性。

### SUG-14 【`handleNewWindow`の`SetActivePane`失敗後にロールバックなし】
- **ファイル**: `command_router_handlers_window.go`
- **内容**: ステップ11で`SetActivePane`失敗時もセッション・ターミナルは作成済み。フロントエンドはスナップショット差分で復旧するため実害は低いが認識すべき。

### SUG-15 【Prefix+c の無効化後のUX】
- **ファイル**: `usePrefixKeyMode.ts`
- **内容**: Prefix+cのハンドラ内で`api.AddWindow`呼び出しが削除され、空の`return`のみ。キー入力が「飲み込まれる」状態。NewSessionModalからの操作に誘導するか、キーバインド自体を削除してフォールスルーさせるか検討。

### SUG-16 【テスト期待値を定数から算出式へ】
- **ファイル**: `app_session_log_test.go`
- **内容**: `expectDeleted: []int{0,1,...,9}`は`sessionLogMaxFiles`から算出すべき。定数変更時にテストがサイレントに壊れる。

### SUG-17 【テストのエントリMessageに制御文字使用】
- **ファイル**: `app_session_log_test.go`
- **内容**: `"entry " + string(rune(i))`で`i=0`はNULL文字。`fmt.Sprintf("entry %d", i)`が適切。

### SUG-18 【`filepath`変数名がパッケージ名をシャドーイング】
- **ファイル**: `app_session_log_test.go`
- **内容**: `filepath := filepath.Join(...)`でパッケージ`path/filepath`をローカル変数でシャドーイング。可読性が低い。`filePath`等への変更を推奨。

### SUG-19 【`viewer.css`のカラー変数の意味的不一致】
- **ファイル**: `viewer.css`
- **内容**: `.error-log-level.warn`に`--accent`を使用。warn専用のカラー変数（`--warn`）定義が安全。

---

## Strengths（良い点）

1. **デッドロック回避の設計品質**: `TeeHandler → slog → writeSessionLogEntry`の再帰デッドロック問題に対して、`fmt.Fprintf(os.Stderr, ...)`によるバイパスパターンが適切。コメントで再帰パスも明示
2. **堅牢なロールバック設計**: `handleNewWindow`のセッション作成ロールバック処理が`handleNewSession`と統一パターンで実装。一貫性が高い
3. **テストの充実**: Session Log機能に対して境界条件（空、上限、独立コピー）を網羅するテーブル駆動テストが実装済み
4. **マルチウィンドウ関連コード削除の徹底**: API, テスト, CSS, フック, Wailsバインディングまで一貫して削除。デッドコードを残していない
5. **防御的プログラミング**: `GetSessionErrorLog`がnilではなく空スライスを返す設計、`writeSessionLogEntry`がファイル未初期化でもメモリには書き込む設計
6. **TeeHandlerのSOLID準拠**: `slog.Handler`インターフェースを忠実に実装。Single Responsibilityが明確
7. **ロック順序のドキュメンテーション維持**: `app.go`のロック順序コメントが更新済み。`sessionLogMu`は独立ロックセットとして扱われる
8. **SessionViewの簡素化**: マルチウィンドウの痕跡がほぼ除去。直線的フローで可読性が高い
9. **Error Log ビューの操作性**: copy-on-select, Ctrl+Cコピー, 全件コピーボタン, コピー済みフィードバック, auto-scrollが丁寧に実装
10. **shimバリデーション完備**: `-t`に加え`-n`の必須チェック、空文字列トリムも実施。テストも正常系+異常系網羅

---

## 推奨アクションプラン

1. **最優先**: IMP-07（文字化け修正）、IMP-08（空ファイル削除）、IMP-13（import順序） — 工数極小で即完了
2. **次に**: IMP-02〜04（フロントエンドストア修正 — レースコンディション・メモリリーク系）
3. **その後**: IMP-01（フロントエンドデッドリンク確認）、IMP-09〜10（テストカバレッジ向上）
4. **最後**: Suggestion群（コメント品質改善、リファクタリング）
5. **修正後**: Wailsバインディング再生成（`wails generate module`）+ 全体コンパイルチェック

---

## 並列作業表

以下の表は、各修正タスクを**並列で同時に作業できるか**を整理し、作業グループに分けたものです。

### 凡例
- ○ = 並列作業可能（他タスクと依存関係なし）
- △ = 条件付きで並列可能（同一ファイル内だが変更箇所が離れている）
- × = 順序依存（先行タスクの完了を待つ必要あり）

### 全タスク一覧

| # | ID | タスク | 対象ファイル | 工数 | 並列 | 備考 |
|---|-----|-------|------------|------|------|------|
| 1 | IMP-07 | 文字化けコメント修正（UTF-8化） | `spec.go`, `app_session_log.go` | 極小 | ○ | コメントのみの修正 |
| 2 | IMP-08 | 空ファイル削除 | `app_window_api.go`, `app_window_api_test.go` | 極小 | ○ | ファイル削除のみ |
| 3 | IMP-13 | import文の順序修正 | `app.go` | 極小 | ○ | `goimports`で自動修正可 |
| 4 | IMP-12 | `//go:fix inline`重複削除 | `app_session_api_test.go` | 極小 | ○ | 1行削除 |
| 5 | IMP-14 | `validateRequired`の重複統合 | `parse.go` | 小 | ○ | ケース文の統合のみ |
| 6 | IMP-05 | イベント発行のスロットリング検討 | `app_session_log.go` | 中 | ○ | 他ファイルに影響なし |
| 7 | IMP-06 | `f.Sync()`導入・クラッシュ耐性強化 | `app_session_log.go` | 小 | △ | IMP-05と同一ファイル、直列推奨 |
| 8 | IMP-02 | Error Log 初期フェッチの競合修正 | `useBackendSync.ts`, `errorLogStore.ts` | 中 | × | IMP-03,04と同時修正推奨 |
| 9 | IMP-03 | `setEntries`にunreadCountリセット追加 | `errorLogStore.ts` | 極小 | × | IMP-02と同一改修 |
| 10 | IMP-04 | Error Logエントリに上限追加 | `errorLogStore.ts` | 小 | × | IMP-02,03と同一ファイル |
| 11 | IMP-01 | フロントエンドAPIデッドリンク解消 | フロントエンド各所 | 中 | △ | IMP-08の空ファイル削除仕様確定後 |
| 12 | IMP-09 | `ApplyLayoutPreset`正常系テスト追加 | `app_pane_api_test.go` | 中 | ○ | 新規テスト追加 |
| 13 | IMP-10 | テスト名文字列マッチ依存の解消 | `command_router_handlers_window_test.go` | 小 | ○ | 構造体にフィールド追加 |
| 14 | IMP-11 | 未使用テストヘルパー関数削除 | `app_session_log_test.go` | 極小 | △ | SUG-16〜18と同一ファイル |
| 15 | SUG-01 | `GetSessionLogFilePath` mutex保護 | `app_session_log.go` | 極小 | △ | IMP-05,06と同一ファイル、直列推奨 |
| 16 | SUG-05 | `tmux:session-created`ポリシー確認 | `app_events.go` | 極小 | ○ | ソース確認のみ |
| 17 | SUG-06 | フラグ継承ヘルパー作成 | `command_router_handlers_window.go` | 小 | ○ | リファクタリング |
| 18 | SUG-07 | `RenameWindowByID`ユニットテスト追加 | `session_manager_window_test.go` | 中 | ○ | 新規テスト追加 |
| 19 | SUG-09 | `app.go`のコメント修正 | `app.go` | 極小 | △ | IMP-13と同一ファイル |
| 20 | SUG-10 | Godocステップ数修正 | `command_router_handlers_window.go` | 小 | △ | SUG-06と同一ファイル |
| 21 | SUG-11 | `[DEBUG-WS]`ログレベル修正 | `app.go` | 極小 | △ | IMP-13,SUG-09と同一ファイル |
| 22 | SUG-15 | Prefix+cのUX改善 | `usePrefixKeyMode.ts` | 小 | ○ | フロントエンドのみ |
| 23 | SUG-16 | テスト期待値を定数から算出式へ | `app_session_log_test.go` | 小 | △ | IMP-11と同一ファイル |
| 24 | SUG-17 | テストの制御文字エントリ修正 | `app_session_log_test.go` | 極小 | △ | 同上 |
| 25 | SUG-18 | `filepath`変数名シャドーイング修正 | `app_session_log_test.go` | 極小 | △ | 同上 |
| 26 | SUG-04 | CSS `position: relative`確認 | `viewer.css` | 極小 | ○ | CSS確認のみ |
| 27 | SUG-19 | カラー変数の意味的不一致修正 | `viewer.css` | 極小 | △ | SUG-04と同一ファイル |

---

### 並列作業グループ（推奨割り当て）

以下のグループは**互いに独立**しているため、同時に作業可能です。各グループ内のタスクのみ直列で実施してください。

| グループ | タスクID | 作業内容 | 対象領域 | 工数 |
|---------|----------|---------|---------|------|
| **G1** | IMP-13, SUG-09, SUG-11 | import順序修正 + コメント修正 + ログレベル修正 | `app.go` | 極小 |
| **G2** | IMP-08 | 空ファイル削除 | `app_window_api.go/test` | 極小 |
| **G3** | IMP-07 | 文字化けコメントUTF-8修正 | `spec.go`, `app_session_log.go` | 極小 |
| **G4** | IMP-05, IMP-06, SUG-01 | ロギング基盤の堅牢化（スロットリング + fsync + mutex保護） | `app_session_log.go` | 中 |
| **G5** | IMP-02, IMP-03, IMP-04 | フロントエンドストア改善（競合修正 + unreadCount + 上限追加） | `errorLogStore.ts`, `useBackendSync.ts` | 中 |
| **G6** | IMP-01 | フロントエンドAPIデッドリンク解消 | フロントエンド各所 | 中 |
| **G7** | IMP-09 | `ApplyLayoutPreset`正常系テスト追加 | `app_pane_api_test.go` | 中 |
| **G8** | IMP-10 | テスト名文字列マッチ依存解消 | `command_router_handlers_window_test.go` | 小 |
| **G9** | IMP-11, SUG-16, SUG-17, SUG-18 | セッションログテスト修正（ヘルパー削除 + 期待値算出式 + 制御文字 + シャドーイング） | `app_session_log_test.go` | 小 |
| **G10** | IMP-12 | `go:fix inline`重複削除 | `app_session_api_test.go` | 極小 |
| **G11** | IMP-14 | `validateRequired`重複統合 | `parse.go` | 小 |
| **G12** | SUG-06, SUG-10 | フラグ継承ヘルパー作成 + Godocステップ数修正 | `command_router_handlers_window.go` | 小 |
| **G13** | SUG-07 | `RenameWindowByID`ユニットテスト追加 | `session_manager_window_test.go` | 中 |
| **G14** | SUG-05 | `tmux:session-created`ポリシー確認 | `app_events.go` | 極小 |
| **G15** | SUG-15 | Prefix+c UX改善 | `usePrefixKeyMode.ts` | 小 |
| **G16** | SUG-04, SUG-19 | CSS確認 + カラー変数修正 | `viewer.css` | 極小 |
| **FINAL** | — | **Wailsバインディング再生成 + コンパイルチェック** | `frontend/wailsjs/*` | — |

> **G1〜G16 は全グループ並列実行可能**です。**FINAL は G1〜G16 がすべて完了した後に直列で実行**してください。

---

### 推奨作業順序（優先度別）

```
┌─────────────────────────────────────────────────────────────────────────┐
│ Phase 1（即完了・工数極小）  ← 最優先                                    │
│   G1, G2, G3, G10, G14     並列実行                                    │
├─────────────────────────────────────────────────────────────────────────┤
│ Phase 2（バグ修正・メモリリーク系）                                       │
│   G4, G5, G11              並列実行                                    │
├─────────────────────────────────────────────────────────────────────────┤
│ Phase 3（テストカバレッジ・整合性）                                       │
│   G6, G7, G8, G9, G12, G13 並列実行                                   │
├─────────────────────────────────────────────────────────────────────────┤
│ Phase 4（UX・コメント品質改善）                                          │
│   G15, G16                 並列実行                                    │
├─────────────────────────────────────────────────────────────────────────┤
│ FINAL（統合・再生成）       ← 全Phase完了後に直列実行                     │
│   Wails バインディング再生成 + コンパイルチェック                          │
└─────────────────────────────────────────────────────────────────────────┘
```
