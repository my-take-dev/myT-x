# PR レビュー結果 — 2026-02-22 10:30:36

## レビュー対象

コミット前の `myT-x/` 配下の全変更ファイルに対して、5カテゴリ並列レビューを実施。

### 変更ファイル一覧

| カテゴリ | ファイル |
|---|---|
| A: Go バックエンドコア | app.go, app_devpanel_api.go, app_devpanel_types.go, app_events.go, app_lifecycle.go, app_session_log.go, app_session_log_types.go |
| B: Go バックエンドテスト | app_devpanel_api_test.go, app_lifecycle_test.go, app_session_api_test.go, app_session_log_test.go |
| C: internal/sessionlog | internal/sessionlog/handler.go, internal/sessionlog/handler_test.go |
| D: internal/tmux | internal/tmux/session_manager_windows.go, command_router_handlers_window.go, 各テストファイル, internal/testutil/helpers.go |
| E: フロントエンド | src/api.ts, stores/errorLogStore.ts, hooks/useBackendSync.ts, 各コンポーネント, wailsjs/go/\* |

---

## Critical Issues（マージ前に必ず修正）

**Criticalなし** — 全レビュアーからCriticalは報告されませんでした。

---

## Important Issues（修正すべき）

### I-01 【A】`parseDiffHeaderPaths` — パス名内に ` b/` を含む非クォートリネームで誤分割
**ファイル**: `myT-x/app_devpanel_api.go` / `parseDiffHeaderPaths`

**問題**:
フォールバックの `strings.Index(header, " b/")` は header 中の**最初の** ` b/` 出現位置を使う。パス名自体に ` b/` が含まれる場合（例: `a/docs b/images/README.md b/README.md`）、分割点が誤り `OldPath`/`Path` が壊れる。

また、対称長チェック（`content[pathLen+3:] == candidate`）は old ≠ new のリネーム差分では**成立しない**ため、リネームは必ずフォールバックに落ちる。

**修正案**: リネーム行の `rename from` / `rename to` を先読みして `oldPath`/`newPath` を上書きするロジックを追加する。またはフォールバック候補を全 ` b/` 出現位置でブルートフォース検証する。

---

### I-02 【A】`DevPanelWorkingDiff` — `isFreshRepo` 判定がロケール依存
**ファイル**: `myT-x/app_devpanel_api.go` / `DevPanelWorkingDiff`

**問題**:
```go
isFreshRepo := strings.Contains(errMsg, "unknown revision") ||
    strings.Contains(errMsg, "bad revision")
```
`git` の `LC_MESSAGES` が非英語環境では上記メッセージが出力されず、フレッシュリポジトリで untracked ファイルが一切取得できなくなる。

**修正案**: `git rev-parse --verify HEAD` を事前実行してHEADの存在を確認するか、`*exec.ExitError` の終了コードで判断する。

---

### I-03 【A】`buildUntrackedFileDiffSingle` — `isPathWithinBase` チェック欠落
**ファイル**: `myT-x/app_devpanel_api.go` / `buildUntrackedFileDiffSingle`

**問題**:
同コードベース内の他のファイルアクセス関数（`resolveAndValidatePath` 等）では必ず `isPathWithinBase` による境界チェックを行っているが、この関数では省略されている。`git ls-files` は理論上リポジトリ外パスを返さないが、防御的コーディング規約との不整合がある。

**修正案**:
```go
absPath := filepath.Join(workDir, filepath.FromSlash(relPath))
if !isPathWithinBase(absPath, workDir) {
    slog.Warn("[DEVPANEL] untracked path escapes workDir", "path", relPath)
    return nil
}
```

---

### I-04 【A】`DevPanelWorkingDiff` — バイト境界切り捨てで部分エントリが混入
**ファイル**: `myT-x/app_devpanel_api.go` / `DevPanelWorkingDiff`

**問題**:
```go
if len(raw) > devPanelMaxDiffSize {
    raw = raw[:devPanelMaxDiffSize]  // diff block 途中で切断
    truncated = true
}
files := parseWorkingDiff(raw)
```
最終 diff ブロックが `"deleted file mode"` 行の前で切断されると Status が `"modified"`（デフォルト値）と誤判定される。`truncated=true` はセットされるが、壊れたエントリが Files に含まれる。

**修正案**: 切り捨て後の `raw` から末尾の不完全ブロック（最後の `"diff --git "` 以降）を除去してから `parseWorkingDiff` に渡す。

---

### I-05 【B】`TestWriteSessionLogEntry_SeqMonotonicallyIncreasing` — WARN ログが出力される
**ファイル**: `myT-x/app_session_log_test.go`

**問題**:
テスト実行時に以下のノイズが出力される:
```
WARN [DEBUG-EVENT] runtime event dropped because app context is nil event=app:error-log-updated
```
`TestWriteSessionLogEntry_EmitsCorrectEventName` ではダミーの `runtimeEventsEmitFn` をセットしているが、`SeqMonotonicallyIncreasing` では未設定。

**修正案**:
```go
oldEmitFn := runtimeEventsEmitFn
defer func() { runtimeEventsEmitFn = oldEmitFn }()
runtimeEventsEmitFn = func(context.Context, string, ...any) {}
```

---

### I-06 【B】`TestGetSessionErrorLog_EmptyReturnsEmptySlice` — 2ケースが完全重複
**ファイル**: `myT-x/app_session_log_test.go`

**問題**:
```go
{name: "returns empty slice when no entries written", writeEntry: false, expectCount: 0},
{name: "returns non-nil empty slice (not nil)",       writeEntry: false, expectCount: 0},
```
両ケースとも `writeEntry: false, expectCount: 0` で全く同一のコードパスを実行。2番目のケースで「非nilスライス」の追加検証はない。

**修正案**: 1ケースに集約するか、2番目のケースで `writeEntry: true` にするか、非nil検証ロジックを追加する。

---

### I-07 【B】`TestNewSessionLogRingBuffer_ClampsNonPositiveCapacity` — Seq検証がオートインクリメントの確認になっていない
**ファイル**: `myT-x/app_session_log_test.go`

**問題**:
```go
rb.push(SessionLogEntry{Seq: 1, ...})  // 手動で Seq: 1 をセット
// → entries[0].Seq == 1 の確認
```
`writeSessionLogEntry` 経由の自動インクリメントを検証しておらず、「手動Seqが保存される」ことの確認に過ぎない。テスト名からはオートインクリメントを検証しているように読める。

**修正案**: テスト名を `TestNewSessionLogRingBuffer_PushAndSnapshot_PreservesFields` に変更するか、`writeSessionLogEntry` 経由のテストに作り直す。

---

### I-08 【C】`handler.go` — `disk-full alert` コメントとコールバックシグネチャの設計矛盾
**ファイル**: `myT-x/internal/sessionlog/handler.go` / `Handle`

**問題**:
```go
// NOTE: The callback is invoked regardless of base handler error because UI
// notification (e.g. disk-full alert) should not depend on log persistence.
```
しかし `EntryCallback` に `base error` が渡されない設計のため、コールバック側は「base handler が正常に書けたのか、書き込み失敗したのか」を区別できない。「disk-full alert」は現在の設計では実現不可能。

**修正案（A）**: コメントから `"e.g. disk-full alert"` を削除し、実際の意図（「ログ書き込みの成否に関わらずUIへの通知機会を保証する」）を正確に記述する。  
**修正案（B）**: `EntryCallback` のシグネチャに `baseErr error` を追加して設計を完成させる。  
→ 少なくともコメント修正（案A）は必須。

---

### I-09 【C】`handler.go` — panic リカバリーでスタックトレースが消失
**ファイル**: `myT-x/internal/sessionlog/handler.go` / `Handle`

**問題**:
```go
fmt.Fprintf(os.Stderr, "[session-log] callback panicked: %v\n", r)
```
`%v` は panic の値のみ出力し、スタックトレースが欠落するため本番環境でのデバッグが困難になる。

**修正案**:
```go
import "runtime/debug"
fmt.Fprintf(os.Stderr, "[session-log] callback panicked: %v\n%s\n", r, debug.Stack())
```

---

### I-10 【D】`session_manager_directional_test.go` — `window2.Layout` 未初期化（他の注入パターンとの不整合）
**ファイル**: `myT-x/internal/tmux/session_manager_directional_test.go` / `TestResolveDirectionalPane_MultipleWindowScopeIsolation`

**問題**:
同パッケージ内の全ての多ウィンドウ内部注入箇所では `newLeafLayout()` でレイアウトを初期化しているが、このテストのみ省略。現在は `ResolveDirectionalPane` が `Layout` を参照しないため通過するが、将来 nil dereference パニックの原因になる。

**修正案**:
```go
window2.Panes = []*TmuxPane{isolatedPane}
window2.Layout = newLeafLayout(isolatedPane.ID)  // 追加
session.Windows = append(session.Windows, window2)
```

---

### I-11 【E】`ErrorLogView.tsx` — `key={entry.seq ?? fallback}` の演算子誤用・dead code
**ファイル**: `myT-x/frontend/src/components/viewer/views/error-log/ErrorLogView.tsx`

**問題**:
```tsx
key={entry.seq ?? `fallback-${entry.ts}-${i}`}
```
`??`（nullish coalescing）は `null | undefined` にのみ反応する。`0 ?? "fallback"` は `0` を返す（フォールバックしない）。さらに `normalizeEntries` で `seq > 0` フィルタ済みのため fallback ブランチは到達不能な dead code。

**修正案**:
```tsx
key={entry.seq}
```

---

### I-12 【E】`useBackendSync.ts` — 初回ロードと ping ハンドラで `fetchErrorLog` ロジックが重複
**ファイル**: `myT-x/frontend/src/hooks/useBackendSync.ts`

**問題**:
`fetchErrorLog` 関数定義後、初回ロード（IMP-02）でほぼ同一のPromiseチェーンを重複実装している。

**修正案**:
```typescript
// IMP-02: ping event に購読後、初回フェッチを直接呼び出す
void fetchErrorLog();
// ← 既存の void api.GetSessionErrorLog().then(...) ブロックを置換
```

---

### I-13 【E】`errorLogStore.ts` — `seq > 0` 前提がフロントエンド単独では不透明
**ファイル**: `myT-x/frontend/src/stores/errorLogStore.ts` / `isValidSeq`

**問題**:
```typescript
return typeof seq === "number" && Number.isFinite(seq) && seq > 0;
// seq > 0 の根拠がバックエンド実装依存であることがコメントに明記されていない
```
将来の変更作業者が `>= 0` に緩めてバグを混入させるリスクがある。

**修正案**: コメントを追加する:
```typescript
// seq > 0: Backend assigns seq via a.sessionLogSeq++ before copying to entry.
// Therefore the Go zero value (0) can never appear as a valid seq.
```

---

### I-14 【E】`viewerRegistry.ts` / `ViewerSystem.tsx` — `getRegisteredViews()` が非リアクティブ
**ファイル**: `myT-x/frontend/src/components/viewer/ViewerSystem.tsx`

**問題**:
`ViewerSystem.tsx` の shortcutMap は useEffect deps に `getRegisteredViews()` が含まれないため、HMR でビュープラグインが追加されてもショートカットマップが更新されない。プロダクションでは同期登録済みのため実害は低いが、技術的負債。

**修正案（短期）**: コメントで非リアクティブの理由と制約を明記する。  
**修正案（長期）**: `useSyncExternalStore` でregistryをラップしてReactに伝播させる。

---

## Suggestions（改善提案）

### S-01 【A】`WorkingDiffStatus` type alias の意図コメント
**ファイル**: `myT-x/app_devpanel_types.go`

`type WorkingDiffStatus = string`（alias）のため任意の string が型エラーなく代入できる。意図的であれば理由（Wails JSON互換性等）をコメントに明記することを推奨。

---

### S-02 【A】`emitRuntimeEvent(_, nil)` — nil ペイロードの扱いコメント精度向上
**ファイル**: `myT-x/app_session_log.go`

`nil` 渡しは `optionalData = []interface{}{nil}` となりフロントエンドには `null` が届く。NOTE(A-0) の「ペイロードなし ping」と微妙に乖離。`struct{}{}` を渡す形や、コメントに "null として届く" を明記することを推奨。

---

### S-03 【A】`cleanupOldSessionLogs` — PID付きファイル名の辞書順ソートで数値順不一致
**ファイル**: `myT-x/app_session_log.go`

PID が2桁と3桁で混在すると削除対象がわずかにずれる可能性がある。`sort.Slice` でタイムスタンププレフィックス比較を行うとより堅牢（コメントで「approximate ordering で十分」と説明済みのため優先度低）。

---

### S-04 【A】`buildUntrackedFileDiffs` + `buildUntrackedFileDiffSingle` — 二重 `os.Stat`
**ファイル**: `myT-x/app_devpanel_api.go`

外側の `buildUntrackedFileDiffs` でも `os.Stat` を呼び、内側の `buildUntrackedFileDiffSingle` でも再度呼んでいる。`os.FileInfo` を引数として渡すよう内側関数のシグネチャを変えることでシステムコール削減と TOCTOU ウィンドウ縮小が可能。

---

### S-05 【A】`app.go` struct コメント — `sessionLogSeq` の protection 説明が重複
**ファイル**: `myT-x/app.go`

`sessionLogSeq` 固有の "Protected by sessionLogMu (write side)" と、ブロック全体の "Protected by sessionLogMu (RWMutex: ...)" が連続して読みづらい。整理を推奨。

---

### S-06 【B】`TestBuildUntrackedFileDiffs_ExcludedDirsSkipped` — `.git` 除外が未検証
**ファイル**: `myT-x/app_devpanel_api_test.go`

`devPanelExcludedDirs` に `".git"` と `"node_modules"` が含まれているが、テストは `node_modules` のみ確認。`.git` ディレクトリも同テスト内で追加検証すべき。

---

### S-07 【B】`TestNewSessionLogRingBuffer_ClampsNonPositiveCapacity` — 負の容量ケース欠如
**ファイル**: `myT-x/app_session_log_test.go`

仕様コメント「capacity values <= 0 are clamped to 1」に対し、テストは `0` のみ。`-1`、`-100` 等の負値テーブルも追加推奨。

---

### S-08 【B】`TestParseWorkingDiff` — copy/modechange ケース欠如
**ファイル**: `myT-x/app_devpanel_api_test.go`

`copy from/to` や `old mode/new mode` ケースが未テスト。実装が `"modified"` として処理するならそのことをテストとして明示すべき。

---

### S-09 【B】runtimeEventsEmitFn スタブパターンの統一ヘルパー化
**ファイル**: `myT-x/app_session_log_test.go`

複数テストで同一の3行スタブ定型コードが繰り返されている。`stubRuntimeEventsEmit(t, fn)` ヘルパーに集約で DRY 化可能。

---

### S-10 【C】`handler.go` `TeeHandler.group` フィールドコメント — 旧名称 "source field" 残存
**ファイル**: `myT-x/internal/sessionlog/handler.go`

差分で `source → group` 名称変更が行われたが、フィールドのインラインコメントに旧称が残っている可能性。確認・修正を推奨。

---

### S-11 【C】`handler_test.go` — `CallbackPanic_DoesNotPropagate` で base handler の暗黙依存
**ファイル**: `myT-x/internal/sessionlog/handler_test.go`

`slog.NewTextHandler(io.Discard, nil)` がエラーを返さないことに暗黙依存。`&errorHandler{err: nil}` を使うと意図が明示化される。

---

### S-12 【D】`command_router_handlers_window.go` — `snapshot-refetch` ロールバックパスのテスト不在
**ファイル**: `myT-x/internal/tmux/command_router_handlers_window.go`

新ロールバックパス `rollbackSession("snapshot-refetch", ...)` のテストが存在しない。`captureEmitter` パターンで `RemoveSession` 介入が可能になれば将来テスト追加を推奨。

---

### S-13 【D】`testutil/helpers.go` — `//go:fix inline` の意図コメント追加
**ファイル**: `myT-x/internal/testutil/helpers.go`

`//go:fix inline` が Go 1.26+ の機能であることと `new(T)` への移行意図がコメントに記載されておらず、他の開発者が誤解する可能性がある。

---

### S-14 【D】多ウィンドウ内部注入パターン — 共有ヘルパー抽出の検討
**ファイル**: テスト複数ファイル

同一のウィンドウ注入定型コードが4箇所存在する。次のdiffで5箇所目が追加された時点で `injectTestWindow(t, manager, sessionName)` ヘルパーへの抽出を推奨（現時点は "below the threshold" のため Suggestion）。

---

### S-15 【E】`viewerRegistry.ts` HMR `dispose` — 再登録タイムウィンドウ
**ファイル**: `myT-x/frontend/src/components/viewer/viewerRegistry.ts`

`dispose` 後〜新モジュールが `registerView` を呼ぶまでの短期間に HMR リレンダリングが発生するとビューが一瞬消える可能性がある。実用上は問題ないが、HMR 開発体験として想定内の動作であることをコメントに追記すると良い。

---

### S-16 【E】`useBackendSync.ts` — `ERROR_LOG_DEBOUNCE_MS` 定数の配置
**ファイル**: `myT-x/frontend/src/hooks/useBackendSync.ts`

`useEffect` 内のローカル定数として定義されているが、モジュール定数として定義する方が自然（実害はない）。

---

## Positive Observations（良い点）

### バックエンド全般
- **NOTE アノテーション設計** (A-0, A-0b, A-2, 1-window model): 設計根拠がコードに埋め込まれており、将来の保守性が高い
- **writeSessionLogEntry の単一ロック取得**: ring buffer append・shouldEmit 判定・sessionLogSeq インクリメントを1回のロック取得内で完結させ、旧実装の race window を完全排除
- **Sync() のロック外呼び出し**: ディスク I/O latency が sessionLogMu をブロックしないよう設計
- **PID suffix**: 同一秒内の再起動でのファイル名重複を確実に回避
- **diff-tree への `--` 追加**: ValidateCommitish との多重防御として優れた実装
- **git ls-files -z の NUL 区切り**: スペース・タブを含むパスを正しく扱える
- **bytes.IndexByte への変更**: ContainsRune より高速かつ慣用的
- **newSessionLogRingBuffer のクランプ**: モジュロゼロパニックを防ぐ最小限の防御

### TeeHandler (internal/sessionlog)
- **WithGroup("") の slog.Handler 仕様への正確な準拠**: spec通りの実装
- **panic リカバリーのスコープ設計**: 即時実行関数でリカバリースコープをコールバック一点に絞る
- **errorHandler モック設計**: 最小限の4メソッド mock で意図が明確
- **errors.Is を使ったエラー伝播検証**: error wrapping 慣例に沿った堅牢なテスト

### tmux 内部
- **new(true)/new(false) と //go:fix inline の整合**: Go 1.26 機能を一貫して活用
- **rollbackSession の修正**: 旧実装のnil継続バグを正しくエラー返却に変更
- **NOTE(1-window model) コメント群**: アーキテクチャ判断の根拠が文書化されている
- **removeWindowResult の OWNERSHIP CONTRACT**: 所有権移転・Terminal.Close義務が明記
- **copySessionFlags の設計**: 新フラグ追加時の漏れリスクを能動的に抑止

### フロントエンド
- **Ping-based fetch アーキテクチャ**: スロットリングによるデータ損失を構造的に排除
- **seq 採番による安定した identity**: ts+level+msg の複合キー衝突問題を根本解決
- **setEntries の unreadCount リアルタイム再計算**: eviction 時に自動補正される副次効果
- **onEvent cleanup の三段構え**: eventOn解除 + debounce clearTimeout + isMountedRef guard
- **globalThis ベースの HMR 対応レジストリ**: モジュールリロード時の二重登録問題を解決
- **position: "bottom" による ActivityStrip レイアウト分離**: extensible な設計

---

## 推奨アクションプラン

```
1. Important Issues を修正 (I-01〜I-14)
2. 修正後に再レビュー (特に I-01, I-02, I-11 は動作確認必須)
3. Suggestion をバックログに積む
4. コミット
```

---

## タスク別並列作業可否表

作業者が効率よく並列で取り組めるよう、修正タスクを整理しました。  
**重要度**: 🔴 Important / 🟡 Suggestion  
**並列可否**: ✅ 並列作業OK / ⚠️ 要調整（同ファイル競合の可能性）

### Important Issues 修正タスク

| # | タスクID | ファイル | 内容 | 重要度 | 並列作業可否 | 担当メモ |
|---|---|---|---|---|---|---|
| 1 | I-01 | `app_devpanel_api.go` | `parseDiffHeaderPaths` のパス名 ` b/` 誤分割修正 | 🔴 | ⚠️ I-02/I-04 と同ファイル | **単独で作業推奨** |
| 2 | I-02 | `app_devpanel_api.go` | `isFreshRepo` 判定をロケール非依存に変更 | 🔴 | ⚠️ I-01/I-04 と同ファイル | **単独で作業推奨** |
| 3 | I-03 | `app_devpanel_api.go` | `buildUntrackedFileDiffSingle` に `isPathWithinBase` チェック追加 | 🔴 | ⚠️ I-01/I-04 と同ファイル | **単独で作業推奨** |
| 4 | I-04 | `app_devpanel_api.go` | バイト境界切り捨てで部分エントリ除去ロジック追加 | 🔴 | ⚠️ I-01/I-03 と同ファイル | **単独で作業推奨** |
| 5 | I-05 | `app_session_log_test.go` | `SeqMonotonicallyIncreasing` にダミー emitFn スタブ追加 | 🔴 | ✅ I-06/I-07 と同ファイルだが独立行 | 同一担当者が一括対応可 |
| 6 | I-06 | `app_session_log_test.go` | 重複テストケース解消 | 🔴 | ✅ I-05/I-07 と同ファイルだが独立行 | 同一担当者が一括対応可 |
| 7 | I-07 | `app_session_log_test.go` | テスト名修正 or 期待値の意図明確化 | 🔴 | ✅ I-05/I-06 と同ファイルだが独立行 | 同一担当者が一括対応可 |
| 8 | I-08 | `internal/sessionlog/handler.go` | `disk-full alert` コメント修正 | 🔴 | ✅ I-09 と同ファイルだが独立行 | 同一担当者が一括対応可 |
| 9 | I-09 | `internal/sessionlog/handler.go` | panic リカバリーに `debug.Stack()` 追加 | 🔴 | ✅ I-08 と同ファイルだが独立行 | 同一担当者が一括対応可 |
| 10 | I-10 | `session_manager_directional_test.go` | `window2.Layout = newLeafLayout()` 追加 | 🔴 | ✅ 他タスクと独立ファイル | 単独で作業可 |
| 11 | I-11 | `ErrorLogView.tsx` | `key={entry.seq}` に修正 | 🔴 | ✅ 他タスクと独立ファイル | 単独で作業可 |
| 12 | I-12 | `useBackendSync.ts` | 初回フェッチを `fetchErrorLog()` 呼び出しに統一 | 🔴 | ✅ 他タスクと独立ファイル | 単独で作業可 |
| 13 | I-13 | `errorLogStore.ts` | `isValidSeq` に `seq > 0` 根拠コメント追加 | 🔴 | ✅ 他タスクと独立ファイル | 単独で作業可 |
| 14 | I-14 | `ViewerSystem.tsx` | 非リアクティブ `getRegisteredViews()` にコメント追加 または リアクティブ化 | 🔴 | ✅ 他タスクと独立ファイル | 単独で作業可 |

### Suggestion タスク

| # | タスクID | ファイル | 内容 | 重要度 | 並列作業可否 | 担当メモ |
|---|---|---|---|---|---|---|
| 15 | S-01 | `app_devpanel_types.go` | `WorkingDiffStatus` alias 理由コメント追加 | 🟡 | ✅ 독立ファイル | 単独で作業可 |
| 16 | S-02 | `app_session_log.go` | `emitRuntimeEvent(_, nil)` コメント精度向上 | 🟡 | ✅ 独立行 | 単独で作業可 |
| 17 | S-03 | `app_session_log.go` | cleanup sort を `sort.Slice` に変更（ファイル名PIDの数値順） | 🟡 | ✅ S-02 と同ファイルだが独立行 | 同一担当者推奨 |
| 18 | S-04 | `app_devpanel_api.go` | 二重 `os.Stat` 解消（FileInfo を引数渡しへ） | 🟡 | ⚠️ I-01〜I-04 と同ファイル | I-01〜04 修正後に実施 |
| 19 | S-05 | `app.go` | struct コメント重複整理 | 🟡 | ✅ 独立ファイル | 単独で作業可 |
| 20 | S-06 | `app_devpanel_api_test.go` | `.git` 除外テストケース追加 | 🟡 | ✅ 独立ファイル | 単独で作業可 |
| 21 | S-07 | `app_session_log_test.go` | 負の容量テストケース追加 | 🟡 | ✅ I-05〜07 修了後に追加可 | テスト担当者が一括 |
| 22 | S-08 | `app_devpanel_api_test.go` | copy/modechange テストケース追加 | 🟡 | ✅ S-06 と同ファイルだが独立行 | 同一担当者推奨 |
| 23 | S-09 | `app_session_log_test.go` | runtimeEventsEmitFn スタブヘルパー化 | 🟡 | ⚠️ I-05〜07/S-07 修了後に実施 | テスト担当者が一括 |
| 24 | S-10 | `internal/sessionlog/handler.go` | `group` フィールドコメント旧名称修正 | 🟡 | ✅ I-08/I-09 修了後に追加可 | sessionlog 担当者が一括 |
| 25 | S-11 | `internal/sessionlog/handler_test.go` | `CallbackPanic` テストの base handler 明示化 | 🟡 | ✅ 独立行 | 単独で作業可 |
| 26 | S-12 | `command_router_handlers_window.go` | snapshot-refetch ロールバックテスト（将来分） | 🟡 | ✅ 独立ファイル | 将来対応 |
| 27 | S-13 | `internal/testutil/helpers.go` | `//go:fix inline` 意図コメント追加 | 🟡 | ✅ 独立ファイル | 単独で作業可 |
| 28 | S-14 | テスト複数ファイル | 多ウィンドウ注入ヘルパー抽出（5箇所目追加時） | 🟡 | - | 将来対応 |
| 29 | S-15 | `viewerRegistry.ts` | HMR dispose タイムウィンドウのコメント追記 | 🟡 | ✅ 独立ファイル | 単独で作業可 |
| 30 | S-16 | `useBackendSync.ts` | `ERROR_LOG_DEBOUNCE_MS` をモジュール定数に移動 | 🟡 | ✅ I-12 修了後に追加可 | I-12 担当者が一括 |

### 並列作業グループ推奨

以下のグループは**同時に並列で進めることができます**：

| グループ | タスク | 理由 |
|---|---|---|
| **グループ α** | I-05, I-06, I-07 | `app_session_log_test.go` 内の独立行。同一担当者が一括対応可 |
| **グループ β** | I-08, I-09 | `handler.go` 内の独立行。同一担当者が一括対応可 |
| **グループ γ** | I-10 (directional_test), I-11 (ErrorLogView), I-12 (useBackendSync), I-13 (errorLogStore), I-14 (ViewerSystem) | **相互に独立したファイル。異なる担当者が完全並列作業可** |
| **グループ δ** | I-01, I-02, I-03, I-04 | 同ファイル競合あり。**1人が順次対応推奨** |

> **注意**: グループ δ（I-01〜I-04）は全て `app_devpanel_api.go` に対する変更のため、まとめて1人が担当することを推奨します。S-04 も同ファイルのため、δ 完了後に続けて対応してください。

---

## サマリー

| 区分 | 件数 |
|---|---|
| Critical Issues | 0 件 |
| Important Issues | 14 件 |
| Suggestions | 16 件 |
| **修正必要合計** | **14 件** |

---

*レビュー実施日時: 2026-02-22 10:30:36*  
*レビュー範囲: myT-x/ 配下のコミット前変更全ファイル (38ファイル)*
