# PR レビュー結果

> **生成日時**: 2026-02-22 10:40:26 JST  
> **対象差分ディレクトリ**: `D:\myT-x\dev-myT-x\review\temp`  
> **差分ファイル数**: 35 ファイル  
> **レビュー方針**: [review-pr-para.prompt.md](./.github/prompts/review-pr-para.prompt.md)  
> **レビュー手法**: 4カテゴリ並列レビュー（サブエージェント同時実行）

---

## 変更概要

本PRは主に以下の機能を追加・変更しています：

1. **セッションログ刷新**: `app:error-logged` → `app:error-log-updated`（Ping/Fetch モデル）へ移行、`seq` フィールドによる安定した重複排除
2. **DevPanel WorkingDiff**: 作業中のgit差分（未追跡ファイル含む）を取得する新しいAPIの追加
3. **1ウィンドウモデルの整備**: `AddWindow`/`WindowIndexInSession` の削除、ロールバック強化
4. **フロントエンドアーキテクチャ**: ビューレジストリのグローバル化・HMR対応、ActivityStripの上下分割

---

## レビューサマリー

| 重要度 | 件数 |
|--------|------|
| 🔴 CRITICAL（マージ前必修） | 0 |
| 🟡 IMPORTANT（対応推奨） | 8 |
| 🔵 SUGGESTION（提案） | 9 |
| ✅ POSITIVE（良い点） | 17 |

---

## カテゴリA: セッションログ バックエンド (Go)

**対象ファイル**:
- `app.go` (sessionLogSeq フィールド追加)
- `app_session_log_types.go` (Seq追加、RingBuffer改善)
- `app_session_log.go` (Ping/Fetchモデル、PID追加)
- `internal/sessionlog/handler.go` (TeeHandler改修)

---

### 🔴 CRITICAL（重大な問題）

なし

---

### 🟡 IMPORTANT（重要な問題）

#### A-1: リングバッファの `snapshot` におけるラップ時のデータ欠損の疑い

**ファイル**: `app_session_log_types.go`

提供された差分では `snapshot` メソッドにおいて、`head` からバッファ末尾までのコピー（`first` セグメント）は確認できますが、バッファが一周してラップしている場合の「バッファ先頭側に巻き戻った残りエントリ」を `out[first:]` にコピーする後半ロジックが差分には含まれていません。

- もしこのコピーロジックが実装済みであればバグではありませんが、差分を見る限り欠落している可能性があります
- バッファが満杯（`rb.count == len(rb.buf)`）かつ `head > 0` の状態でフロントエンドが不完全なスナップショットを受け取ることになります
- **確認推奨**: `snapshot` の完全な実装コードを再確認してください

#### A-2: `min` 組み込み関数の Go バージョン依存

**ファイル**: `app_session_log_types.go`

`min` 組み込み関数（`first := min(bufCap-rb.head, rb.count)`）は **Go 1.21 以降** でのみ利用可能です。プロジェクトの `go.mod` で指定されている最低バージョンをご確認ください。1.20 以前の場合はビルドエラーが発生します。（同様の使用が `app_devpanel_api.go` の `buildUntrackedFileDiffSingle` にも存在します）

---

### 🔵 SUGGESTION（提案）

#### A-S1: ファイル名の衝突耐性の更なる向上

**ファイル**: `app_session_log.go`

PID の付加（NOTE(A-2)）により再起動時の衝突は大幅に軽減されています。ただし `time.Now().Format("20060102-150405")` は秒単位の精度のため、同一プロセス内での極めて高速な再初期化（単体テストなど）での衝突可能性は微小ながら残ります。ミリ秒精度のタイムスタンプへの変更を検討の価値があります。

#### A-S2: Seq の累積特性についてコメントの精度向上

**ファイル**: `app_session_log_types.go`

```go
// NOTE: uint64 values above 2^53-1 (Number.MAX_SAFE_INTEGER) lose precision
// in JavaScript. Current max (sessionLogMaxEntries=10000) is well within safe range.
```

`Seq` はリングバッファ内のインデックスではなく **累積カウンタ** です。「バッファサイズ=10000」は安全性の根拠にはなりません（長期稼働では `Seq` は無制限に増大します）。コメントを「長期稼働でも実用的な範囲（例: 毎秒100件で約3000年）では安全」という形に改正することを推奨します。

---

### ✅ POSITIVE（良い点）

- **ディスクI/Oの最適化**: `Sync()` をロック外（post-lock）で実行するリファクタリングは優秀。ディスク書き込みレイテンシが他のログ操作をブロックしなくなっています
- **Ping/Fetchモデルの採用**: イベントへのペイロード廃止はWailsのIPC負荷軽減とスロットリングによるデータ欠損防止を両立する堅牢な設計です
- **コールバックのパニック保護**: `TeeHandler.Handle` でコールバックを `recover()` で保護することで、外部から注入された処理がロギングシステムをクラッシュさせるリスクを排除しています
- **`WithGroup("")` の仕様準拠**: `slog.Handler` 仕様に従ってレシーバーをそのまま返す実装は正しく、仕様準拠を示すコメントも適切です
- **Seq による安定な重複排除**: 秒精度のタイムスタンプ複合キーへの依存を排除し、単調増加の `Seq` で管理することでフロントエンドの信頼性が大幅に向上しています

---

## カテゴリB: DevPanel WorkingDiff バックエンド (Go)

**対象ファイル**:
- `app_devpanel_api.go` (WorkingDiff新規追加、既存変更)
- `app_devpanel_types.go` (WorkingDiffFile/Result型追加)
- `app_devpanel_api_test.go` (多数のテスト追加)

---

### 🔴 CRITICAL（重大な問題）

なし

---

### 🟡 IMPORTANT（重要な問題）

#### B-1: `parseDiffHeaderPaths` におけるファイル名に " b/" を含む場合の誤パース

**ファイル**: `app_devpanel_api.go` (parseDiffHeaderPaths 関数、行相当: head fallback部分)

対称性チェック（`a/path b/path` 形式）に失敗した場合のフォールバックとして `strings.Index(header, " b/")` を使用していますが、以下のシナリオで誤分割が発生します：

```
a/my b/file.txt b/my b/file.txt
```

この場合、「` b/`」が最初に現れる位置でスプリットされ、`oldPath = "my"`, `newPath = "file.txt b/my b/file.txt"` という誤った結果になります。

**対応案**: ファイルパスにスペースが含まれる rename diff については、`rename from`/`rename to` 行からパスを確定する（既存ロジック）ので実害は小さいですが、同一パスのmodifiedケースでスペース有りパスが ` b/` を含む場合に問題が出ます。テストケース `"unquoted path with space (same old/new)"` はこのパターンに対応していますが、` b/` がパス内に出現するケースは未テストです。

#### B-2: `strings.Split(raw, "diff --git ")` によるコンテンツ内文字列との衝突

**ファイル**: `app_devpanel_api.go` (parseWorkingDiff 関数, `parts := strings.Split(raw, "diff --git ")`)

ファイルの内容（`+` 行）が `\ndiff --git ` で始まる場合、意図しないファイル分割が発生します。実用上は非常に稀ですが、テストデータにこのエッジケースが含まれていないため、ドキュメントにこの制限を記載することを推奨します。

---

### 🔵 SUGGESTION（提案）

#### B-S1: `workDir` 外へのパストラバーサル防止チェック

**ファイル**: `app_devpanel_api.go` (buildUntrackedFileDiffs, buildUntrackedFileDiffSingle)

`filepath.Join(workDir, filepath.FromSlash(relPath))` で構築した `absPath` が `workDir` の配下に収まっているかを確認するバリデーションを追加することで、シンボリックリンクや `../` を含む不正なパスに対する防御が強化されます：

```go
if !strings.HasPrefix(absPath, workDir+string(filepath.Separator)) {
    slog.Debug("[DEBUG-DEVPANEL] path escaped workDir", "path", absPath)
    return nil
}
```

#### B-S2: 空ファイルのdiffヘッダー形式

**ファイル**: `app_devpanel_api.go` (buildUntrackedFileDiffSingle)

空ファイル（`len(lines) == 0`）を処理する場合、`@@ -0,0 +1,0 @@` というヘッダーが生成されます。これは標準的なunified diff形式では意味が不明確です。空ファイルの場合はdiffを生成しない（または空ファイルであることを示す別の方法を使う）ことを検討してください。

#### B-S3: バイナリ検出改善（既存変更のレビュー）

`bytes.ContainsRune(probe, '\x00')` → `bytes.IndexByte(probe, 0)` への変更は、正確性（NULL文字のルーン幅が意識されない問題のない変更）とパフォーマンスの観点で適切です。この変更自体は問題ありません。

---

### ✅ POSITIVE（良い点）

- **新規リポジトリへの配慮**: `git diff HEAD` のエラー時（`unknown revision`/`bad revision`）をフレッシュリポジトリと判定し、未追跡ファイルの収集を継続するロジックは優秀なUX設計です
- **適切なリソース管理**: `devPanelMaxDiffSize` による切り詰め＋ループ内での累積サイズチェックにより、大規模リポジトリでのメモリ・通信量の爆発を防いでいます
- **NUL区切りによる正確なパス取得**: `ls-files -z` とNUL文字区切りパースで、スペースや特殊文字を含むファイルパスを正確に処理しています
- **`--` セパレータの追加**: `DevPanelCommitDiff` に `--` を追加したことで、コミットハッシュとファイルパスの曖昧さを解消し、セキュリティと正確性を向上させています
- **フィールドカウントガードテスト**: `TestWorkingDiffFileFieldCountGuard` / `TestWorkingDiffResultFieldCountGuard` は、フロントエンド型定義との同期を強制する優れた防御的テストです
- **クロスプラットフォーム対応**: Windowsのネイティブパス区切り（`\`）を `/` に正規化する処理が一貫して行われています

---

## カテゴリC: tmux セッション管理 (Go)

**対象ファイル**:
- `session_manager_windows.go` (AddWindow削除、各種改善)
- `command_router_handlers_window.go` (ロールバック強化)
- `app_events.go` (コメント改善)
- `app_lifecycle.go` (TeeHandlerシグネチャ変更)
- `internal/testutil/helpers.go` (go:fix inline追加)
- 各種テストファイル

---

### 🔴 CRITICAL（重大な問題）

なし

---

### 🟡 IMPORTANT（重要な問題）

#### C-1: `new(T)` によるポインタ生成の値の問題

**ファイル**: `command_router_handlers_window_test.go`, `command_router_env_test.go`, `app_session_api_test.go`

`testutil.Ptr(true)` → `new(true)` への変更について：

- `new(bool)` は **ゼロ値（false）へのポインタ** を常に返します
- `new(true)` は **Goの構文として無効** です（`new` はtype引数を受け取るため）

実際には差分で `new(true)` と書かれていますが、これは正確には `func() *bool { v := true; return &v }()` の省略として意図している可能性があります。しかしGoでは `new(true)` という記法はコンパイルエラーになります。

**確認推奨**: 実際のコードが `new(true)` というリテラルなのかを確認してください。もしそうであれば、コンパイルエラーとなるため `testutil.Ptr(true)` のまま（または `func() *bool { v := true; return &v }()` へ変更）が必要です。

> **補足**: Goには `new(bool)` という記法があり、これは `*bool`（値は `false`）を返します。`new(true)` という記法はGoに存在しません。差分のレビューにおいてこの点を特に注意してください。

#### C-2: `removeWindowAtIndexLocked` の nil スライス返却への影響確認

**ファイル**: `session_manager_windows.go`

```go
-	removedPanes := make([]*TmuxPane, 0)
+	var removedPanes []*TmuxPane
```

`window == nil` の場合に `removedPanes` が nil のまま返されます。呼び出し側がこのスライスを `len()` チェックせずに使用している場合は問題ありませんが、JSON シリアライズを通じてフロントエンドに渡る場合 `[]` ではなく `null` になります。内部ロジックのみで使用されている場合は問題なし。呼び出し側を確認してください。

---

### 🔵 SUGGESTION（提案）

#### C-S1: `source` vs `group` の命名統一

**ファイル**: `app_lifecycle.go`, `app_session_log_types.go`

`TeeHandler` のコールバック引数名は `source` → `group` に変更されましたが、`SessionLogEntry.Source` フィールド名は変更されていません。変更の意図が「ログのグループ化」への概念シフトであれば、将来的に `Source` → `Group` へのリネームも検討してください。現状は混在状態で誤解を招く可能性があります。

#### C-S2: ロールバック `stage` 情報のエラーメッセージへの包含確認

**ファイル**: `command_router_handlers_window.go`

`rollbackSession` に `stage` 引数を追加したことでデバッグ効率が高まっています。この `stage` 情報が `ipc.TmuxResponse` のエラーレスポンスにも含まれ、ログから問題の段階が特定できることを確認してください。

#### C-S3: 複数テストでの内部フィールド直接操作パターンの整理

**ファイル**: 複数のテストファイル（session_manager_window_test.go など）

セカンドウィンドウをテストに注入するために `manager.mu.Lock()` で直接内部フィールドを操作するパターンが **4箇所** 存在します。コメントには「5箇所以上でヘルパー化を検討」とありますが、現在の4箇所でも共通ヘルパー化（例: `injectTestWindow(t, manager, session, "name")`）によってコードの重複と誤りのリスクを減らせます。

---

### ✅ POSITIVE（良い点）

- **フェイルファーストなロールバック**: `handleNewWindow` でスナップショット取得失敗時に警告で済ませず明示的なロールバック（セッション削除）を行うことで、ゾンビセッションの発生を防いでいます
- **ActiveWindowID の自己修復**: 古くなった `ActiveWindowID` を自動修復するパスの検証テストは、システムの耐障害性を高めます
- **将来への詳細なコメント（NOTEコメント）**: 1ウィンドウモデルに関する包括的なコメントが各所に配置され、将来のマルチウィンドウ拡張 roadmap が明確に示されています
- **`//go:fix inline` ディレクティブ**: `testutil.Ptr` への追加は静的解析ツール（`gofix`）によるコードの自動最適化を促進する良い実践です
- **差分ヘッダーパス解析の包括的テスト**: 空白含みパス、クォートパス、octalエスケープ、リネームなど多様なエッジケースがテストされています

---

## カテゴリD: フロントエンド (TypeScript/React)

**対象ファイル**:
- `errorLogStore.ts` (seq管理、addEntry削除)
- `useBackendSync.ts` (Ping/Fetchモデル対応)
- `viewerRegistry.ts` (グローバル状態化、HMR対応)
- `ActivityStrip.tsx` (上下分割レイアウト)
- `ViewerSystem.tsx` (動的ショートカットマップ)
- `ErrorLogView.tsx` (依存配列修正, seqキー)
- `error-log/index.ts` (position追加)
- Wails自動生成ファイル、CSS

---

### 🔴 CRITICAL（重大な問題）

なし

---

### 🟡 IMPORTANT（重要な問題）

#### D-1: `isValidSeq` で `seq === 0` が除外される問題

**ファイル**: `errorLogStore.ts`

```ts
function isValidSeq(seq: unknown): seq is number {
    return typeof seq === "number" && Number.isFinite(seq) && seq > 0;
}
```

バックエンドの `sessionLogSeq` は `uint64` で初期値 `0`、最初の書き込み時に `a.sessionLogSeq++`（→ `1`）が実行されます。つまり実際にフロントエンドに送られる seq は **1以上** です。`seq > 0` の条件は正しいですが、万が一バックエンドで seq=0 のエントリが送られた場合（デバッグや将来の変更で）にフィルタリングされ表示されません。

この設計意図（seq=0 は「未割り当て」を意味する）がコメントに明記されていると可読性が向上します。現状挙動は仕様通りですが、ドキュメントとして補強することを推奨します。

#### D-2: `useEffect` 依存配列とショートカットマップの非効率な再構築

**ファイル**: `ViewerSystem.tsx`

```ts
useEffect(() => {
    const views = getRegisteredViews();
    const shortcutMap = new Map<string, string>();
    for (const view of views) {
        if (view.shortcut) {
            shortcutMap.set(view.shortcut.toLowerCase(), view.id);
        }
    }
    // ...
}, [activeViewId, toggleView, closeView]);
```

`activeViewId` が変化するたびにイベントリスナーの解除・再登録とショートカットマップの再構築が発生します。ショートカットリストはレジストリが変化しない限り不変なので、ショートカットマップの構築を `useEffect` 外（またはuseMemo）に切り出すことで効率化できます。また、レジストリが動的に変化する場合（HMR時）にはショートカットが即座に反映されない可能性があります。

#### D-3: `ErrorLogView` での `bodyRef` 依存削除の妥当性確認

**ファイル**: `ErrorLogView.tsx`

```ts
-    }, [bodyRef]);
+    }, []);
```

2つの `useEffect` から `bodyRef` が依存配列に除去されました。`bodyRef` はRefオブジェクトであり、Reactの慣習では「Refは依存配列に含めない」が一般的なルールです。この変更はReactのベストプラクティスに準拠していると考えられますが、これらのeffectが `bodyRef.current` に対してイベントリスナーを登録する場合は、マウント時に `bodyRef.current` が確実に存在することを確認してください（コンポーネントのレンダリング順序による問題がないか）。

---

### 🔵 SUGGESTION（提案）

#### D-S1: API呼び出しの競合状態（Race Condition）対策

**ファイル**: `useBackendSync.ts`

```ts
const fetchErrorLog = () => {
    void api.GetSessionErrorLog()
        .then((result) => {
            if (!isMountedRef.current) return;
            useErrorLogStore.getState().setEntries(result ?? []);
        })
```

80ms デバウンスを経由しても、複数のリクエストが並行して発生した場合に古いレスポンスが新しいレスポンスを上書きする可能性（Promiseの競合）があります。`AbortController` でリクエストをキャンセルするか、seq ベースで「最新のレスポンスのみ適用」するガードを検討してください。

#### D-S2: ショートカットの重複チェック

**ファイル**: `viewerRegistry.ts`

`registerView` 内で `id` の重複は確認していますが、`shortcut` 文字列の重複はチェックされていません。同一ショートカットを持つ2つのプラグインが登録された場合、後から登録された方が勝つ（または先に登録された方が勝つ）かが不明確です。開発時に警告を出す実装を推奨します：

```ts
if (import.meta.env.DEV && view.shortcut) {
    const existing = registry.find(v => v.shortcut === view.shortcut && v.id !== view.id);
    if (existing) {
        console.warn(`[Registry] Duplicate shortcut "${view.shortcut}" for "${view.id}" and "${existing.id}"`);
    }
}
```

#### D-S3: フォールバックキーのパターン

**ファイル**: `ErrorLogView.tsx`

```tsx
key={entry.seq ?? `fallback-${entry.ts}-${i}`}
```

`entry.seq` が数値型（`number`）として定義されているため、`?? fallback` の分岐が実際に発生するのは seq が `undefined` か `null` の場合のみです。TypeScriptの型定義上 `seq: number` は非オプションであるため、実質的にフォールバックには到達しません。もし後方互換性のためのフォールバックであれば、コメントでその意図を明示してください。

---

### ✅ POSITIVE（良い点）

- **Seq による堅牢な重複排除**: タイムスタンプ複合キー（秒精度の衝突リスク）から `seq` ベースの管理への移行で、フロントエンドのログ管理信頼性が大幅に向上
- **HMR対応の考慮**: `globalThis` ＋ `import.meta.hot.dispose` による開発時のモジュール再ロードへの対応は、開発体験の維持にとって重要な実装です
- **効率的な未読カウント計算**: `setEntries` 内で末尾から `lastReadSeq` までスキャンする実装は、大量ログ時のパフォーマンスに優れています
- **UI構造の柔軟性**: `ActivityStrip` の `position: "bottom"` 対応により、VS Codeライクな上下分割レイアウトが実現されています
- **シングルソースのショートカット管理**: `ViewerSystem` でショートカットマップをレジストリから動的に構築する実装により、ハードコードされたif-else連鎖が解消されています
- **CSS変数化によるスタイル一貫性**: `rgba(246, 173, 85, 0.1)` → `var(--warning-10)` へのリファクタリングはデザインシステムの一貫性を高めています
- **addEntry の削除**: Ping/Fetchモデルへの移行に伴い、`addEntry` というエントリ単位の追加メソッドが適切に削除されています。これにより、バックエンドとフロントエンドの状態が常に同期される保証が強化されています

---

## 横断的な指摘（複数カテゴリに共通）

### 共通-1: `new(true)` / `new(false)` の文法的問題

**影響ファイル**:
- `command_router_handlers_window_test.go`
- `command_router_env_test.go`
- `app_session_api_test.go`

`testutil.Ptr(true)` → `new(true)` への置き換えがGoの構文として問題です。Goの `new(T)` はゼロ値を持つ `T` へのポインタを返しますが、`new(true)` という記法はGoでサポートされていません（`true` はtype名ではありません）。

**正しい代替案**:
```go
// 方法1: ヘルパー（testutil.Ptr[T]を維持）
testutil.Ptr(true)

// 方法2: ローカルな匿名関数（非推奨・冗長）
func() *bool { v := true; return &v }()

// 方法3: 変数経由（冗長だが明確）
b := true; &b
```

`//go:fix inline` ディレクティブの追加は、将来的に `testutil.Ptr` のインライン化を促すものですが、現時点では `testutil.Ptr(true)` の形が適切です。コンパイル確認を強く推奨します。

### 共通-2: `[DEBUG-DEVPANEL]` ログレベルの統一

**影響ファイル**: `app_devpanel_api.go`

新規追加コードでは `slog.Debug("[DEBUG-DEVPANEL] ...")` の形式が使用されています。`[DEBUG-DEVPANEL]` というプレフィックスは Debug ログにのみ付与されているため、既存の他モジュール（`[DEVPANEL]` は Warn に付与）とパターンが異なります。ログ検索性のためにプレフィックス規則を統一することを推奨します。

---

## タスク一覧と並列作業可否表

以下のタスク表は、作業者が修正に着手する際の参考として作成しています。「並列作業可否」は、他のタスクと独立して並行して作業できるかを示しています。

| # | 重要度 | タスク | 対象ファイル | 並列作業可否 | 備考 |
|---|--------|--------|-------------|:------------:|------|
| T-01 | 🔴 確認必須 | **C-1: `new(true)`の文法検証・修正** | `*_test.go` (3ファイル) | ✅ 可能 | コンパイル確認後、`testutil.Ptr(true)` に戻すか、正しい記法に修正 |
| T-02 | 🟡 重要 | **A-1: `snapshot` メソッドのラップ処理確認** | `app_session_log_types.go` | ✅ 可能 | 差分外の既存コードを確認して欠落の有無を確認 |
| T-03 | 🟡 重要 | **A-2: `min` 組み込み関数のGoバージョン確認** | `go.mod` | ✅ 可能 | `go.mod` の最低バージョンが1.21以上かを確認 |
| T-04 | 🟡 重要 | **B-1: スペース含みパスの " b/" 誤分割問題** | `app_devpanel_api.go` | ✅ 可能 | `parseDiffHeaderPaths` のエッジケースを追加テスト |
| T-05 | 🟡 重要 | **B-2: diff内容に "diff --git " が含まれる場合の制限をドキュメント化** | `app_devpanel_api.go` | ✅ 可能 | コメントで制限を明記するか、ヘッダー行判定を強化 |
| T-06 | 🟡 重要 | **C-2: nil スライスのJSON化影響確認** | `session_manager_windows.go` + 呼び出し元 | ⚠️ 要確認 | 呼び出し元が JSON を返す場合は影響あり |
| T-07 | 🟡 重要 | **D-2: `useEffect` のショートカットマップ再構築の最適化** | `ViewerSystem.tsx` | ✅ 可能 | `useMemo` の活用またはmap構築のeffect外移動 |
| T-08 | 🟡 重要 | **D-3: `bodyRef` 依存削除後の動作確認** | `ErrorLogView.tsx` | ✅ 可能 | マウント時のDOM存在確認、実際の動作テスト |
| T-09 | 🔵 提案 | **A-S2: Seq コメントの精度修正** | `app_session_log_types.go` | ✅ 可能 | コメントのみの変更 |
| T-10 | 🔵 提案 | **B-S1: パストラバーサル防止チェック追加** | `app_devpanel_api.go` | ✅ 可能 | `buildUntrackedFileDiffs`/`buildUntrackedFileDiffSingle` |
| T-11 | 🔵 提案 | **B-S2: 空ファイルdiffヘッダーの处理** | `app_devpanel_api.go` | ✅ 可能 | 空ファイル時の diff 出力の仕様確定 |
| T-12 | 🔵 提案 | **C-S1: `source` vs `group` 命名統一** | `app_lifecycle.go`, `app_session_log_types.go` | ⚠️ 影響大 | `SessionLogEntry.Source` のリネームは広範な影響あり、慎重に |
| T-13 | 🔵 提案 | **C-S3: 内部フィールド直接操作のヘルパー化** | テストファイル4件 | ✅ 可能 | `injectTestWindow()` ヘルパーへの統合 |
| T-14 | 🔵 提案 | **D-S1: fetchErrorLog の Race Condition 対策** | `useBackendSync.ts` | ✅ 可能 | `AbortController` またはseqベースのガード |
| T-15 | 🔵 提案 | **D-S2: ショートカット重複チェック** | `viewerRegistry.ts` | ✅ 可能 | DEV環境での警告ログ追加 |
| T-16 | 🔵 提案 | **D-S3: フォールバックキーのコメント補強** | `ErrorLogView.tsx` | ✅ 可能 | コメントのみの変更 |
| T-17 | 🔵 提案 | **共通-2: デバッグログプレフィックスの統一** | `app_devpanel_api.go` | ✅ 可能 | `[DEBUG-DEVPANEL]` → `[DEVPANEL]` 等への統一 |

---

### 並列作業グループ

作業者が複数名いる場合、以下のグループ単位で並列作業が可能です：

**グループ1（バックエンド: セッションログ）**: T-02, T-03, T-09  
**グループ2（バックエンド: WorkingDiff）**: T-04, T-05, T-10, T-11  
**グループ3（バックエンド: tmux/テスト）**: T-01, T-06, T-13, T-17  
**グループ4（フロントエンド）**: T-07, T-08, T-14, T-15, T-16  
**グループ5（セキュリティ/ドキュメント）**: T-12（単独、影響大）  

> **注意**: グループ間の依存関係はほとんどありませんが、T-12（命名統一）はバックエンド〜フロントエンド間にわたるため、他作業完了後に実施することを推奨します。

---

*このレビューは `review-pr-para.prompt.md` に基づき、4カテゴリ並列レビュー（サブエージェント同時実行）で実施されました。*
